(function(t){function e(e){for(var r,a,s=e[0],c=e[1],u=e[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1815:function(t,e,n){},1921:function(t,e,n){"use strict";var r=n("db27"),i=n.n(r);i.a},"20be":function(t,e,n){"use strict";var r=n("872b"),i=n.n(r);i.a},2216:function(t,e,n){},2814:function(t,e,n){"use strict";var r=n("a906"),i=n.n(r);i.a},2964:function(t,e,n){"use strict";var r=n("c3fa"),i=n.n(r);i.a},"2f6e":function(t,e,n){},"39f0":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"UnionShopCollection",(function(){return Ne})),n.d(r,"CouponExpression",(function(){return In}));n("4160"),n("b64b"),n("159b"),n("0c26"),n("666b"),n("527a"),n("4586");var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"production"===t.nodeEnv||t.isCross?n("div",{attrs:{id:"__MARKETING_AD__"}}):n("template-index")},o=[],a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("span",[t._v("你有2个消费券未支付完成")]),n("span",[t._v("去完成")])])}],c={},u=c,l=(n("f1ce"),n("2be6")),d=Object(l["a"])(u,a,s,!1,null,"1cddddd0",null),p=d.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("union-shop-collection"),n("coupon-expression",{ref:"ce",attrs:{"list-data":t.couponData,"btn-text":"马上抢","item-style":"abc"},on:{"item-press":t.itemPressHandler,"item-btn-press":t.itemBtnPressHandler},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v("123, "+t._s(e))])]}}])}),n("button",{on:{click:t.loadMore}},[t._v("adfasf")])],1)},h=[],g=(n("b0c0"),n("df26"),n("42c2")),v={data:function(){return{current:"",couponData:[]}},methods:{itemPressHandler:function(t,e,n){console.log("item press",t,e,n)},itemBtnPressHandler:function(t,e,n){var r=e.name,i=n.price;console.log("item btn press",r,i)},loadMore:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.ce.loadMore();case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;setTimeout((function(){t.couponData=[{id:1,price:.2,num:123},{id:3,price:.2},{id:4,price:.2},{id:5,price:.2,btnDisabled:!0,btnLoading:!0,progress:.9},{id:6,price:.2,num:123},{id:7,price:.2},{id:8,price:.2},{id:9,price:.2,btnDisabled:!0,btnLoading:!0,progress:.9},{id:10,price:.2,num:123},{id:11,price:.2},{id:12,price:.2},{id:13,price:.2,btnDisabled:!0,btnLoading:!0,progress:.9},{id:14,price:.2,num:123},{id:15,price:.2},{id:16,price:.2},{id:17,price:.2,btnDisabled:!0,btnLoading:!0,progress:.9},{id:18,price:.2,num:123},{id:19,price:.2},{id:20,price:.2},{id:21,price:.2,btnDisabled:!0,btnLoading:!0,progress:.9},{id:22,price:.2,num:123},{id:23,price:.2},{id:24,price:.2},{id:25,price:.2,btnDisabled:!0,btnLoading:!0,progress:.9},{id:26,price:.2,num:123},{id:27,price:.2},{id:28,price:.2},{id:29,price:.2,btnDisabled:!0,btnLoading:!0,progress:.9}]}),1e3)}},b=v,m=(n("6be1"),Object(l["a"])(b,f,h,!1,null,"679ce626",null)),y=m.exports,w=(n("82da"),{components:{Unpayed:p,TemplateIndex:y},data:function(){return{isCross:"1"===Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_DEV_CROSS}},computed:{nodeEnv:function(){return"production"}}}),x=w,_=(n("5c0b"),Object(l["a"])(x,i,o,!1,null,null,null)),I=_.exports,C=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"__ERROR__"}},[n("div",{staticClass:"error-text"},[n("span",[t._v("o(╥﹏╥)o")]),n("span",[t._v("您访问的活动不存在！")])])])}],D={},O=D,P=(n("f2b0"),Object(l["a"])(O,C,S,!1,null,null,null)),j=P.exports,k=(n("3365"),n("ec82"),n("49f8"),n("7583"),n("8d74"),n("d298"),n("3415"),n("08bc"),n("6c4f"),n("3c35"),n("e8fb6"),n("6851"),n("d800"),n("0a3f"),n("b89b"),n("cc26"),n("34ad"),n("a274"),n("4621"),n("a664"),n("667b"),n("c855"),n("941a"),n("4e51"),n("4fd5"),n("ba20"),n("9e33"),n("e300")),E=n("9869"),T=n("5f2b"),M=n("9ce4"),A=n("8206"),L=n.n(A),R=n("eddc"),N="assert";function $(t,e){if(!t)throw new Error("["+N+"]"+(e||"参数断言失败"))}$.notNull=function(t,e){$(null!==t&&void 0!==t,e||"参数不能为空")},$.match=function(t,e,n){$(e.test(t),n||"参数与指定正则表达式不匹配")},$.equal=function(t,e,n){$(t===e,n||"参数与指定参数不相等")},$.equalType=function(t,e,n){var r=Array.isArray(e)?e:[e],i=!1;for(var o in r)if(r[o]===(null===t||void 0===t?void 0:t.constructor)){i=!0;break}$(i,n||"参数与指定类型不匹配")};var H={argsLength:function(t,e){return"function "+t+" expected 1 arg bug got "+e}},q={insert:function(t,e){return $(1===t.length,H.argsLength("insert",t.length)),t[0]=Array.isArray(t[0])?t[0]:[t[0]],t},limit:function(t,e){return $(1===t.length,H.argsLength("limit",t.length)),t[0]},skip:function(t,e){return $(1===t.length,H.argsLength("skip",t.length)),t[0]},sync:function(t,e){return $(1===Object.keys(e).length&&e.collection,"function sync must call after collection name"),!0}},G=function(t){return"forbidden call function `"+t+"`"},U={drop:G("drop")+", instead you can delete collection by editing property `database` in plugin.js"},B={dropDatabase:G("dropDatabase"),createDatabase:G("createDatabase"),createCollection:G("createCollection")+", collections will create automatically when uploading"};function z(t){return Array.isArray(t)?t.map((function(t){return"string"===typeof t&&(t=JSON.parse(t,(function(t,e){return""===t||(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]+Z$/.test(e)?e=new Date(e):"object"===Object(k["a"])(e)&&1===Object.keys(e).length&&e.$oid&&(e=e.$oid)),e}))),delete t.activityId,t})):t}function F(t,e,n){var r=new Proxy(t,e);return Object.setPrototypeOf(Promise.prototype,r),new Promise(n)}function J(t,e){var n={collection:t},r=F(n,{get:function(t,e){var n=U[e];return $("string"!==typeof n,n),function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=q[e]||function(t,e){return t};return t[e]=o(n,t),r}}},(function(t,r){setTimeout((function(){e(n).then((function(e){if(e!==n){var i=e.data;200===i.code?t(z(i.data)):r(new Error(i.msg))}else t(e)}),(function(t){return r(t)}))}))}));return r}function K(t){return new Proxy({},{get:function(e,n){var r=B[n];if("string"===typeof r)throw new Error(r);return J(n,t)}})}
/*!
  * view-program-lib 0.5.2 (https://github.com/JOU amjs/view-program-lib)
  * API https://github.com/JOU amjs/view-program-lib/blob/master/doc/api.md
  * Copyright 2017-2020 JOU amjs. All Rights Reserved
  * Licensed under MIT (https://github.com/JOU amjs/view-program-lib/blob/master/LICENSE)
  */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var W=function(){return W=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},W.apply(this,arguments)};function V(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{c(r.next(t))}catch(e){o(e)}}function s(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function Y(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return c([t,e])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var X="mpWx",Z="mpAlipay",Q="browser",tt="node";function et(){var t="";try{t=window.location.href}catch(e){t=""}return/devMode=1/.test(t)?"plugin-dev":/devMode=2/.test(t)?"debug":"prod"}var nt={};function rt(t,e){e?nt[t]=e:delete nt[t]}var it,ot={set:function(t,e){var n,r="object"===Object(k["a"])(t)?t:(n={},n[t]=e,n);for(var i in r)rt(i,r[i])},get:function(t){var e=Object(k["a"])(t);if("string"===e||"number"===e)return nt[t]}};function at(t){var e=et();return t[e]||""}var st,ct=location.hostname,ut=at({"plugin-dev":"http://"+ct+":18001",prod:"https://api.ycsh6.com",debug:"http://localhost:7001"}),lt=at({"plugin-dev":"https://api.java.ycsh6.com",prod:"https://api.java.ycsh6.com",debug:"https://api.java.ycsh6.com"}),dt={connectSymbol:"-",key:"sd8mow3RPMDS0PMPmMP98AS2RG43T"},pt=(it={},it[X]={activity:{id:"i5sdedogJeiICuz0dfX-FC2yBdRdkwwcxCg1okRmnys",dataNames:["name3","name2","thing1","thing4"],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"},payResult:{id:"xxxxx",dataNames:["name1"],errorText:"notifyData中必须包含名称数据"}},it[Z]={activity:{id:"",dataNames:[],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"},payResult:{id:"",dataNames:[],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"}},it),ft="/pages/webview-container/webview-container";try{st=window}catch(kn){st={}}var ht=st.wx;function gt(){var t="";try{t=window.navigator.userAgent.toLowerCase()}catch(kn){t="nodejs"}return-1!==t.indexOf("miniprogram")?X:-1!==t.indexOf("alipay miniprogram")?Z:-1!==t.indexOf("node")?tt:Q}function vt(t,e,n){void 0===e&&(e={}),void 0===n&&(n={}),Object.keys(n).forEach((function(e){t=t.replace("{"+e+"}",n[e].toString())}));var r=Object.keys(e).map((function(t){return t+"="+e[t]})).join("&");return r&&(r=(t.indexOf("?")>=0?"&":"?")+r),t+r}function bt(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o={}),r="/"===r.substr(0,1)?r.substr(1):r,r=r?"/"===r.substr(-1)?r:r+"/":r;var a=xt(o),s={accessToken:ot.get("accessToken")||""},c=ot.get("mode");return"plugin-dev"===c?s.devMode=1:"debug"===c&&(s.devMode=2),vt("/{pluginId}/{activityId}/{shopId}/online/{webPagePath}",s,{pluginId:t,activityId:e,shopId:n,webPagePath:r})+"#/"+(i+a)}function mt(t,e){return void 0===e&&(e={}),V(this,void 0,void 0,(function(){var n;return Y(this,(function(r){return n=gt(),[2,new Promise((function(r,i){var o=vt(t,e);if(n===X)ht.miniProgram.navigateTo({url:o,success:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)},fail:function(t){return i(t)}});else{if(n===Z)throw new Error("暂不支持支付宝小程序");if(n===Q){if(!/^https?/.test(t)){var a=_t(t);a.query=JSON.parse(decodeURIComponent(a.query||"")||"{}"),t=bt(a.pluginId,a.activityId,a.shopId,a.path,a.routePath,a.query)}location.href=t}}}))]}))}))}function yt(t){return void 0===t&&(t=1),V(this,void 0,void 0,(function(){var e;return Y(this,(function(n){return e=gt(),[2,new Promise((function(n,r){e===X&&ht.miniProgram.navigateBack({delta:t,success:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(t)},fail:function(t){return r(t)}})}))]}))}))}function wt(t){void 0===t&&(t={});var e=Object.keys(t).sort().map((function(e){return void 0!==t[e]?e+"="+t[e]:void 0})).filter((function(t){return t})).join(dt.connectSymbol)+dt.key;return R["Md5"].hashStr(e)}function xt(t,e){void 0===t&&(t={}),void 0===e&&(e=!0);var n=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");return e&&(n=(n?"?":"")+n),n}function _t(t){var e={};return(t.match(/\?(.*)$/)||["",""])[1].split("&").forEach((function(t){var n=t.split("=");2===n.length&&(e[n[0]]=n[1])})),e}function It(t){void 0===t&&(t="");var e={pluginId:"",activityId:"",shopId:""};t="/"===t.substr(0,1)?t.substr(1):t;var n=t.split("/"),r=n.indexOf("online");if(r<=-1)throw new Error("current url is not a online program's url");return n=n.slice(0,r),e.pluginId=n[0]||"",e.activityId=n[1]||"",e.shopId=n[2]||"",e}function Ct(t){return void 0===t&&(t=!0),(ot.get("activityId")||"")+(ot.get("token")||"")+(t?"-echo":"")}function St(t,e,n,r){void 0===r&&(r=!0);var i={};return e&&(i.routePath=e),n&&(i.query=encodeURIComponent(JSON.stringify(n))),vt(r?ft:"",W({activityId:ot.get("activityId")||"",pluginId:ot.get("pluginId")||"",shopId:ot.get("shopId")||"",path:t},i))}function Dt(t){var e=function(t){return t>=0&&t<10?"0"+t:t.toString()};return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())}function Ot(t){t.interceptors.request.use((function(t){var e,n=gt(),r=ot.get("accessToken")||"",i=Date.parse((new Date).toString())/1e3,o=t.method||"get";return e=/^put|post|patch|delete$/i.test(o)?t.data=t.data||{}:t.params=t.params||{},Object.assign(e,{platform:n,timestamp:i}),e.sign=wt(e),t.headers=W(W({},t.headers||{}),{"Content-Type":"application/json;charset=utf-8"}),r&&(t.headers[o.toLowerCase()||"get"]["x-access-token"]=r),t}),(function(t){Promise.reject(t)})),t.interceptors.response.use((function(t){return 200===t.status?200===t.data.code?t:Promise.reject(new Error(t.data.msg)):Promise.reject(t)}),(function(t){return Promise.reject(t.response)}))}delete st.wx,delete st.jWeixin;var Pt=L.a.create({baseURL:ut,timeout:3e4});Ot(Pt);var jt,kt=L.a.create({baseURL:lt,timeout:3e4});Ot(kt);var Et={},Tt=function(t,e,n){"function"===typeof e&&"string"===typeof t&&(Et[t]={once:!1,fn:e})},Mt={init:function(t){t&&(jt=t,window.addEventListener("message",(function(t){var e=t.data,n=Et[e.name];n&&(n.fn.apply(null,e.args),n.once&&delete Et[e.name])})))},on:function(t,e){Tt(t,e)},once:function(t,e){Tt(t,e)},emit:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];jt&&jt.postMessage({name:t,args:e},"*")}};function At(t){var e=t.path,n=t.routePath,r=t.query;return"plugin-dev"===et()&&Mt.emit("navigate",{path:e,routePath:n,query:r}),mt(St(e,n,r))}function Lt(t){return V(this,void 0,void 0,(function(){return Y(this,(function(e){return[2,yt(t)]}))}))}function Rt(t){t&&(document.title=t,"plugin-dev"===et()&&Mt.emit("titleChanged",t))}function Nt(t){var e=location.hash.match(/^(.*?)(\?.*)?$/)||["","",""],n=_t(e[2]);n.shareMessage=encodeURIComponent(JSON.stringify(t));var r=vt(e[1],n);window.history.replaceState(null,"",r)}var $t=Object.freeze({__proto__:null,mpNavigateTo:At,mpNavigateBack:Lt,setTitle:Rt,updateShareMessage:Nt}),Ht=["beforeEach","beforeResolve","afterEach"];function qt(t,e){if(void 0===t&&(t={}),void 0===e&&(e={title:""}),Object.keys(t).length<=0)return{Vue:E["a"],VueRouter:T["a"],Vuex:M["a"],request:Pt,javaRequest:kt,config:{shopId:ot.get("shopId")||"",activityId:ot.get("activityId")||"",pluginId:ot.get("pluginId")||""}};var n=void 0,r=e.routers,i=e.stores,o=e.plugins,a=e.shareMessage,s=e.title,c=e.navColor;"object"===Object(k["a"])(r)&&Array.isArray(r.routes)&&r.routes.length>0&&(E["a"].use(T["a"]),n=new T["a"](r),Ht.forEach((function(t){r&&n&&"function"===typeof r[t]&&n[t](r[t])})));var u=void 0;"object"===Object(k["a"])(i)&&Object.keys(i).length>0&&(E["a"].use(M["a"]),u=new M["a"].Store(i)),Array.isArray(o)&&o.length>0&&o.forEach((function(t){var e=t[0],n=t[1];E["a"].use(e,n)}));var l={shareMessage:a,navColor:c};if(ot.set("mpInitData",l),"plugin-dev"===et()?(Mt.init(window.parent),Mt.on("configData",(function(t){ot.set("shopConfiguration",t),console.log("%c 接收提示","background:green;color:white","插件视图(线上)已收到配置数据更改通知")})),Mt.emit("pageConfig",l)):kt.post("/user/interact/save",{key:ot.get("pluginId"),value:l}),"string"===typeof s)Rt(s);else if("function"===typeof s){var d=s();"string"===typeof d?Rt(d):d instanceof Promise&&d.then((function(t){"string"===typeof t&&Rt(t)}))}new E["a"]({router:n,store:u,render:function(e){return e(t)}}).$mount("#app")}function Gt(t){return V(this,void 0,void 0,(function(){var e,n,r;return Y(this,(function(i){switch(i.label){case 0:return e=ot.get("activityId"),n=ot.get("shopId"),[4,Pt.post("/v1/call_viewprogramme_function",W({activityId:e,shopId:n},t))];case 1:if(r=i.sent().data,200!==r.code)throw new Error(r.msg);return[2,r.data]}}))}))}function Ut(t){var e=this;return new Promise((function(n,r){if(t)var i=setInterval((function(){return V(e,void 0,void 0,(function(){var e,o;return Y(this,(function(a){switch(a.label){case 0:return[4,kt.get("/user/interact/get",{params:{key:t}})];case 1:return e=a.sent().data,o=e.data,200===e.code&&o?(kt.get("/user/interact/notify",{params:{key:t}}),clearInterval(i),o.exception?r(o.exception):n(o.response),[2]):[2]}}))}))}),1500);else r("echoKey不能为空")}))}var Bt="/pages/interact-webview-miniprogram/interact-webview-miniprogram",zt={COUPON_PURCHASE:"couponPurchase",RECHARGE:"recharge"};function Ft(t){return V(this,void 0,void 0,(function(){var e,n,r,i,o;return Y(this,(function(a){switch(a.label){case 0:return $(Object.values(zt).indexOf(t.intent)>=0,"intent不正确，请使用`EL.payIntent`中的属性"),$(t.amount>0,"支付金额必须大于0，单位(元)"),"couponPurchase"===t.intent&&$(t.couponGroupId,"购买卡券支付时，需传入couponGroupId"),"plugin-dev"!==et()?[3,3]:(e={payOptions:t},"couponPurchase"===t.intent&&t.couponGroupId?(n=e,[4,Qt(t.couponGroupId)]):[3,2]);case 1:n.couponInfo=a.sent(),a.label=2;case 2:return Mt.emit("pay",e),[2,new Promise((function(t,e){Mt.once("payComplete",(function(n){return n?t():e(new Error("取消支付"))}))}))];case 3:return r=Ct(),i=ot.get("activityId"),o=ot.get("shopId"),mt(Bt,{data:encodeURIComponent(JSON.stringify({intent:"pay",echoKey:r,payload:{payOptions:t,activityId:i,shopId:o}}))}),[2,Ut(r)]}}))}))}function Jt(t,e,n){return V(this,void 0,void 0,(function(){var r,i,o,a,s,c,u,l,d,p,f,h,g,v;return Y(this,(function(b){switch(b.label){case 0:if(r=Object.keys(t),$(r.length>0,"请至少订阅一条消息"),Object.keys(t).forEach((function(e){var n=t[e],r=n.timing,i=n.channel,o=n.notifyData;$(r instanceof Date||"string"===typeof i,"[MESSAGE_CODE:"+e+"]必须指定timing或channel其中之一"),$(o.length>0,"[MESSAGE_CODE:"+e+"]模板数据不能为空")})),i=gt(),i!==X&&i!==Z)throw new Error("'"+i+"'平台上不支持订阅消息");return o={},a=pt[i],s=r.map((function(e){var n=a[e];if(n){var r=t[e].notifyData||[];if(!(r.length>=n.dataNames.length))throw new Error("[消息:"+e+"]"+n.errorText);var i={};n.dataNames.forEach((function(t,e){return i[t]=r[e]})),o[n.id]=i}return n.id})).filter((function(t){return t})),$(s.length>0,"请传入有效的消息名"),c=Ct(),mt(Bt,{data:encodeURIComponent(JSON.stringify({intent:"notice",echoKey:c,payload:{tmplIds:s,tipText:e,btnText:n}}))}),u={},[4,Ut(c)];case 1:return u=b.sent(),[3,3];case 2:s.forEach((function(t){return u[t]="accept"})),b.label=3;case 3:for(d in l={},a)p=a[d],l[p.id]=d;for(h in f={},u)g=t[l[h]],"accept"===u[h]&&g&&(f[h]={notifyData:o[h],timing:g.timing?Dt(g.timing):"",channel:g.channel,path:St(g.path,g.routePath,g.query,!1)});return[4,Gt({name:"subscribeMessage",data:f})];case 4:return b.sent(),[3,6];case 5:console.log(f),b.label=6;case 6:return v={},Object.keys(u).forEach((function(t){v[l[t]||t]=u[t]})),[2,v]}}))}))}function Kt(t){return V(this,void 0,void 0,(function(){return Y(this,(function(e){return"plugin-dev"===et()?Mt.emit("toShare",t):mt(Bt,{data:window.encodeURIComponent(JSON.stringify({intent:"share",payload:{title:t.title,imageUrl:t.imageUrl,path:St(t.path,t.routePath,t.query)}}))}),[2]}))}))}var Wt={shopHomepage:"/page-other/shop-homepage/shop-homepage"};function Vt(t,e){return void 0===e&&(e={}),V(this,void 0,void 0,(function(){var n;return Y(this,(function(r){return n=Wt[t],$.notNull(n,"invalid pageCode`"+t+"`"),[2,mt(n,e)]}))}))}var Yt={SIMPLE:0,PERSON:1,LOYALTY:2,WHOLE:3};function Xt(t,e){return void 0===t&&(t=0),void 0===e&&(e=""),V(this,void 0,void 0,(function(){var n,r,i,o;return Y(this,(function(a){switch(a.label){case 0:return n=function(){return Gt({name:"getUserInfo",data:{info:t}})},[4,n()];case 1:return r=a.sent(),r&&r.nickname||1!==t&&3!==t?[3,4]:(i=Ct(),mt("/pages/login/login",{tips:e,infoLevel:t,echoKey:i,save:"true"}),[4,Ut(i)]);case 2:return o=a.sent(),o?[4,n()]:[3,4];case 3:r=a.sent(),a.label=4;case 4:return[2,r]}}))}))}function Zt(t,e){return V(this,void 0,void 0,(function(){return Y(this,(function(n){return $(t,"param `groupId` must be given"),[2,Gt({name:"giveCoupon",data:{customerId:e,groupId:t}})]}))}))}function Qt(t){return V(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c,u,l,d;return Y(this,(function(p){switch(p.label){case 0:for(a in $.equalType(t,[Number,String,Array],"groupIds must be given a string or a array of string"),e="couponInfo",n=ot.get(e)||{},r=Array.isArray(t)?t:[t],i={},o=[],r)s=r[a],c=n[s],c?i[c.id]=c:o.push(s);return o.length>0?[4,Gt({name:"getCouponInfo",data:{groupId:o}})]:[3,2];case 1:u=p.sent(),l=Date.now(),o.forEach((function(t){var e=u.find((function(e){var n=e.id;return n===t}));e&&(e.expireTime=new Date(1e3*e.expireTime),e.status=e.expireTime.getTime()<l?0:e.status,"string"===typeof e.useLimit&&(e.useLimit=JSON.parse(e.useLimit||"[]")),n[e.id]=e),i[t]=e})),p.label=2;case 2:return Array.isArray(t)?[2,i]:(d=Object.keys(i),[2,d.length>0?i[d[0]]:null])}}))}))}function te(t){return V(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c,u,l;return Y(this,(function(d){switch(d.label){case 0:for(a in $.equalType(t,[String,Array],"dishIds must be given a string or a array of string"),e="dishesInfo",n=ot.get(e)||{},r=Array.isArray(t)?t:[t],i={},o=[],r)s=r[a],c=n[s],c?i[c.id]=c:o.push(s);return o.length>0?[4,Gt({name:"getDishInfo",data:{dishId:o}})]:[3,2];case 1:u=d.sent(),o.forEach((function(t){var e=u.find((function(e){var n=e.id;return n===t}));e&&(n[e.id]=e),i[t]=e})),d.label=2;case 2:return Array.isArray(t)?[2,i]:(l=Object.keys(i),[2,l.length>0?i[l[0]]:null])}}))}))}function ee(){return V(this,void 0,void 0,(function(){var t,e;return Y(this,(function(n){switch(n.label){case 0:return t="shopInfo",e=ot.get(t),e?[3,2]:[4,Gt({name:"getShopInfo"})];case 1:e=n.sent(),ot.set(t,e),n.label=2;case 2:return[2,e]}}))}))}function ne(t,e,n){return void 0===t&&(t=!1),void 0===e&&(e=1),void 0===n&&(n=50),V(this,void 0,void 0,(function(){var r,i;return Y(this,(function(o){switch(o.label){case 0:return r="shopConfiguration",i=ot.get(r),i?[3,2]:[4,Gt({name:"getConfiguration",data:{allUnions:t,page:e,pageSize:n}})];case 1:i=o.sent(),ot.set(r,i),o.label=2;case 2:return[2,i]}}))}))}function re(t){return V(this,void 0,void 0,(function(){return Y(this,(function(e){return[2,Gt({name:"notifyMessage",data:{channel:t}})]}))}))}function ie(t){t=t.toString().trim();var e=ot.get("shopId")||"";t&&e!==t&&(location.href=location.href.replace(/\w+(\/\w+\/)online/,(function(e,n){return e.replace(n,"/"+t+"/")})))}var oe,ae=Object.freeze({__proto__:null,payIntent:zt,pay:Ft,subscribeMessage:Jt,share:Kt,navigateELPage:Vt,userInfo:Yt,getUserInfo:Xt,giveCoupon:Zt,getCouponInfo:Qt,getDishInfo:te,getShopInfo:ee,getConfiguration:ne,notifyMessage:re,changeShop:ie}),se=function(t,e){return t+e.toString()},ce="__$$namespaced_storage_keys$$__",ue=function(t){var e=pe[t],n=e.globalThis,r=e.namespace,i=se(r,ce);return{storage:n,keysStoreKey:i,namespace:r,keys:JSON.parse(n.getItem(i)||"[]")}},le="localStorage",de="sessionStorage",pe=(oe={},oe[le]={globalThis:window.localStorage,namespace:""},oe[de]={globalThis:window.sessionStorage,namespace:""},oe),fe=function(){function t(t,e){pe[e].namespace=t,this.storageTag=e;var n=ue(e).keys;this.length=n.length}return t.prototype.setItem=function(t,e){var n=ue(this.storageTag),r=n.storage,i=n.keys,o=n.keysStoreKey,a=n.namespace,s=i.indexOf(t);return i.length>0&&s>=0?i[s]=t:i.push(t),this.length=i.length,r.setItem(o,JSON.stringify(i)),r.setItem(se(a,t),e)},t.prototype.getItem=function(t){var e=ue(this.storageTag),n=e.storage,r=e.namespace;return n.getItem(se(r,t))},t.prototype.removeItem=function(t){var e=ue(this.storageTag),n=e.storage,r=e.keys,i=e.keysStoreKey,o=e.namespace,a=r.indexOf(t);return r.length>0&&a>=0&&r.splice(a,1),this.length=r.length,n.setItem(i,JSON.stringify(r)),n.removeItem(se(o,t))},t.prototype.clear=function(){var t=ue(this.storageTag),e=t.storage,n=t.keys,r=t.keysStoreKey,i=t.namespace;n.length>0&&n.forEach((function(t){return e.removeItem(se(i,t))})),this.length=0,e.removeItem(r)},t.prototype.key=function(t){var e=null,n=ue(this.storageTag),r=n.keys,i=n.namespace,o=r[t];return"string"===typeof o&&(e=o.replace(i,"")),e},t}(),he=_t(window.location.search),ge=It(window.location.pathname),ve=et();if(ot.set(W(W(W({},he),ge),{mode:ve})),!ge.activityId||!ge.shopId)throw new Error("query `activityId` and `shopId` must be given");var be=ge.activityId,me=be||"",ye=new fe(me,le),we=new fe(me,de),xe=K((function(t){return kt({url:"/mongo/collections/operation",method:"post",data:{activityId:me,pluginId:ot.get("pluginId"),env:"plugin-dev"===et()?1:2,db:t}})}));"prod"===ve&&Object.defineProperties(window,{localStorage:{value:ye},sessionStorage:{value:we}});var _e=W(W({Page:qt,database:xe},ae),$t),Ie=_e;n("c975"),n("fb6a"),n("ac1f"),n("1276");function Ce(t){var e={pluginId:"",activityId:"",shopId:"",page:""};t="/"===t.substr(0,1)?t.substr(1):t;var n=t.split("/"),r=n.indexOf("online");if(r<=-1)throw new Error("current url is not a online program's url");return e.page=n[r+1]||"index",n=n.slice(0,r),e.pluginId=n[0]||"",e.activityId=n[1]||"",e.shopId=n[2]||"",e}n("99af");var Se="https://static.ycsh6.com";function De(t){var e=/devMode=1/.test(window.location.href)?"pluginDev":"prod";return t[e]||""}var Oe=De({pluginDev:function(t){var e=t.page;return"/".concat(e,".js")},prod:function(t){var e=t.pluginId,n=t.page;return"".concat(Se,"/program/").concat(e,"/online/").concat(n,".js?").concat(Math.round(1e9*Math.random()))}}),Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container flex-column"},[n("h3",{staticClass:"title"},[t._v("活动联合餐厅")]),n("div",{staticClass:"shop-container",on:{scroll:t.containerScrollHandler}},[n("div",{staticClass:"flex-row",style:t.containerStyle},[n("div",{staticClass:"shop-wrap flex-column"},t._l(t.list,(function(e){return n("div",{key:e.id,ref:"shopItem",refInFor:!0,staticClass:"wrap flex-row align-center",style:t.itemStyle},[n("div",{staticClass:"avatar avatar-wrap",on:{click:function(n){return t.nav2Homepage(e.id)}}},[n("img",{staticClass:"avatar",attrs:{src:e.avatar}})]),n("div",{staticClass:"content-wrap flex-row align-center justify-between",on:{click:function(n){return t.toggleShop(e.id)}}},[n("div",{staticClass:"content flex-column"},[n("span",{staticClass:"title-4 color-gray-4 name"},[t._v(t._s(e.shopName))]),n("span",{staticClass:"text-auxiliary color-gray-2"},[t._v(t._s(e.shortIntro))])]),t._m(0,!0)])])})),0),t.showLoading?n("div",{staticClass:"loading flex-row align-center"},[n("van-loading",{attrs:{type:"spinner",size:20,"text-size":13,vertical:""}},[t._v("加"),n("br"),t._v("载"),n("br"),t._v("中")])],1):t._e()])])])},je=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn-access clickable"},[n("span",{staticClass:"iconfont iconjinru"})])}],ke=(n("a9e3"),n("7c6c")),Ee=Ie.Page(),Te=Ee.javaRequest,Me=Ee.config,Ae={props:{row:{type:Number,default:3,validator:function(t){return t>=1&&t<=3}}},data:function(){return{itemWidth:.84*document.body.offsetWidth,itemHeight:70,page:1,hasMore:!0,loading:!1,list:[]}},computed:{containerStyle:function(){var t=Math.ceil(this.list.length/this.row),e=Math.min(this.list.length,this.row),n=this.showLoading?30:0;return{width:t*(this.itemWidth+32)+n+"px",height:e*(this.itemHeight+12)+"px"}},itemStyle:function(){return{width:this.itemWidth+"px",height:this.itemHeight+"px"}},showLoading:function(){return this.loading||this.hasMore}},methods:{nav2Homepage:function(t){Ie.navigateELPage("shopHomepage",{shopId:t})},toggleShop:function(t){Ie.changeShop(t)},requestList:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var n,r,i,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.hasMore||t.loading){e.next=12;break}return t.loading=!0,r=3===t.row?9:10,e.next=5,Te.get("/shops/activities/".concat(Me.activityId,"/shops"),{params:{status:"1,3",pageNum:t.page,pageSize:r}});case 5:i=e.sent,o=i.data,t.loading=!1,t.page++,a=o.data.list,(n=t.list).push.apply(n,Object(ke["a"])(a)),a.length<r&&(t.hasMore=!1);case 12:case"end":return e.stop()}}),e)})))()},containerScrollHandler:function(t){var e=t.target;e.scrollWidth-e.scrollLeft-20<=e.offsetWidth&&this.hasMore&&!this.loading&&this.requestList()}},mounted:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.requestList();case 2:t.$nextTick((function(){var e=t.$refs.shopItem;e.length>0&&(t.itemWidth=e[0].offsetWidth,t.itemHeight=e[0].offsetHeight)}));case 3:case"end":return e.stop()}}),e)})))()}},Le=Ae,Re=(n("2814"),Object(l["a"])(Le,Pe,je,!1,null,"c80c48a6",null)),Ne=Re.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?n("div",{staticClass:"flex-column align-center loading-wrap"},[n("van-loading",{attrs:{size:"24px"}},[t._v("加载中...")])],1):n("div",{staticClass:"flex-column"},t._l(t.couponInfos,(function(e){return n("div",{key:e.id,class:["dish-item-wrap","string"===typeof t.itemStyle?t.itemStyle:""],style:"object"===typeof t.itemStyle?t.itemStyle:""},[e.couponData.dishes_id&&t.couponDishInfos[e.couponData.dishes_id]?n("dish-hori-rack",{attrs:{"coupon-data":e,data:t.couponDishInfos[e.couponData.dishes_id],"coupon-price":t.listDataMap[e.id].price,"btn-text":t.btnText,"btn-disabled":t.listDataMap[e.id].btnDisabled,"btn-loading":t.listDataMap[e.id].btnLoading,progress:t.listDataMap[e.id].progress},on:{"box-press":function(n){return t.boxPressHandler(e,t.couponDishInfos[e.couponData.dishes_id])},"btn-press":function(n){return t.btnPressHandler(e,t.couponDishInfos[e.couponData.dishes_id])}}}):n("amount-sales",{attrs:{"coupon-data":e,"coupon-price":t.listDataMap[e.id].price,"btn-text":t.btnText,"btn-disabled":t.listDataMap[e.id].btnDisabled,"btn-loading":t.listDataMap[e.id].btnLoading,progress:t.listDataMap[e.id].progress},on:{"box-press":function(n){return t.boxPressHandler(e,{})},"btn-press":function(n){return t.btnPressHandler(e,{})}}})],1)})),0)},He=[],qe=(n("4de4"),n("d81d"),n("07ac"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dish-wrap",on:{click:t.boxPressHandler}},[t.data.tag?n("div",{staticClass:"dish-tag"},[n("badge",{attrs:{text:t.data.tag,color:t.dishTagColors,inverted:"",shape:"triangle"}})],1):t._e(),t.data.media[0]?n("van-image",{staticClass:"dish-img",attrs:{fit:"cover","lazy-load":"",src:t.data.media[0]}}):n("div",{staticClass:"dish-img"}),n("div",{staticClass:"dish-info"},[n("div",{staticClass:"info-top"},[n("div",{staticClass:"dish-name-wrap"},[n("span",{staticClass:"dish-name"},[t._v(t._s(t.data.name))])]),t.data.describe?n("span",{staticClass:"describe"},[t._v(t._s(t.data.describe))]):t._e()]),n("div",{staticClass:"info-bottom flex-row align-right justify-between"},[n("div",{staticClass:"price-discount"},[t.couponPrice>0?n("div",{staticClass:"price"},[n("price-text",{attrs:{amount:t.couponPrice,size:"large"}}),n("price-text",{attrs:{amount:t.data.price,disabled:t.priceDisabled,size:"large"}})],1):t._e(),t.priceDisabled?n("div",{staticClass:"discount"},[n("promotional-tag",{attrs:{color:"#FF8558",text:t.discount||""}}),t.data.limitCopies?n("span",{staticClass:"limit-copies"},[t._v("优惠限"+t._s(t.data.limitCopies)+"份")]):t._e()],1):t._e()]),n("div",{staticClass:"btn-operate flex-column"},[n("van-button",{staticClass:"btn-receive",attrs:{round:"",text:t.btnTextComputed,disabled:t.couponDisabled||t.couponReceiveOver||t.btnDisabled,loading:t.btnLoading},on:{click:function(e){return e.stopPropagation(),t.receiveHandler(e)}}})],1)])]),t.couponDisabled?t._e():n("van-progress",{staticClass:"progress",attrs:{"stroke-width":"2",inactive:t.couponReceiveOver,"pivot-text":"剩"+t.leftPercent+"%",percentage:t.leftPercent,color:"linear-gradient(to right, #fbe8ee, #eea29d)","pivot-color":"#ff0047"}})],1)}),Ge=[],Ue=(n("b680"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"promotional-tag",style:t.textColor},[t._v(t._s(t.text))])}),Be=[],ze={props:{text:{type:String,required:!0},color:{type:String,default:"#FF0047"}},data:function(){return{textColor:"border-color: ".concat(this.color,"; color: ").concat(this.color)}}},Fe=ze,Je=(n("573c"),Object(l["a"])(Fe,Ue,Be,!1,null,"098739c4",null)),Ke=Je.exports,We=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"price-text"},[t.reduce?n("span",{class:t.reduceCls},[t._v("-")]):t._e(),n("span",{class:t.moneyFlagCls},[t._v("￥")]),n("span",{class:t.amountCls},[t._v(t._s(t.amountDecimal))])])},Ve=[],Ye=(n("a15b"),{props:{amount:{type:Number,required:!0},disabled:{type:Boolean,default:!1},reduce:{type:Boolean,default:!1},size:{validator:function(t){return/^default|large$/.test(t)},default:"default"}},data:function(){return{}},computed:{moneyFlagCls:function(){var t=[];switch(this.size){case"default":t.push("money-flag-default");break;case"large":t.push("money-flag-large");break}return t.concat([this.disabled?"disabled":"enabled"]).join(" ")},amountCls:function(){var t=[];switch(this.size){case"default":t.push("amount-default");break;case"large":t.push("amount-large");break}return t.concat([this.disabled?"disabled":"enabled"]).join(" ")},reduceCls:function(){return[this.disabled?"disabled":"enabled"].join(" ")},amountDecimal:function(){return this.amount.toFixed(2)}}}),Xe=Ye,Ze=(n("2964"),Object(l["a"])(Xe,We,Ve,!1,null,"6003582c",null)),Qe=Ze.exports,tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.wrapCls,style:t.wrapStyle},[n("span",{staticClass:"badge-text",style:t.textStyle},[t._v(t._s(t.text))])])},en=[],nn={props:{text:{type:[String,Number],required:!0},inverted:{type:Boolean,default:!1},color:{type:[String,Array],default:"#ff0047"},shape:{type:String,default:"ellipse"},hasPadding:{type:Boolean,default:!0}},computed:{wrapCls:function(){var t=["badge-wrap"];return this.hasPadding&&t.push("badge-padding"),"triangle"===this.shape?t.push("badge-triangle"):t.push("badge-ellipse"),t.concat(this.inverted?[]:["badge-wrap-border"]).join(" ")},wrapStyle:function(){var t=Array.isArray(this.color)?this.color[0]:this.color,e=Array.isArray(this.color)?this.color[1]:"white",n={};return this.inverted?n.background=t:(n.background=e,n.borderColor=t),n},textStyle:function(){var t=Array.isArray(this.color)?this.color[0]:this.color,e=Array.isArray(this.color)?this.color[1]:"white";return{color:this.inverted?e:t}}}},rn=nn,on=(n("b93f"),Object(l["a"])(rn,tn,en,!1,null,"8d779dba",null)),an=on.exports;n("d3b7"),n("25f0");function sn(){return"0"===this.couponData.status.toString()}function cn(){return this.couponDisabled?"已过期":this.leftPercent<=0?"已领完":this.btnText?this.btnText:this.couponPrice>0?"抢券":"领券"}function un(){var t=0;if(this.progress)t=100*this.progress;else{var e=this.couponData,n=e.limitAmount,r=e.receivedAmount;t=(n-r)/n*100}return Math.round(t)}var ln={components:{PromotionalTag:Ke,PriceText:Qe,Badge:an},props:{data:{type:Object,required:!0},couponData:{type:Object,required:!0},couponPrice:{type:Number,default:0},btnText:String,btnDisabled:{type:Boolean,default:!1},btnLoading:{type:Boolean,default:!1},progress:{type:Number,validate:function(t){return t>0&&t<1}}},computed:{priceDisabled:function(){return this.couponPrice>0&&this.data.price>this.couponPrice},discount:function(){return this.priceDisabled?(this.couponPrice/this.data.price*10).toFixed(1)+"折":""},dishTagColors:function(){var t={"招牌":["#FFCC25","#333333"],"优惠组合":["#333333","#FFCC25"]};return t[this.data.tag]||"#ff0047"},couponDisabled:function(){return sn.call(this)},couponReceiveOver:function(){return this.leftPercent<=0},btnTextComputed:function(){return cn.call(this)},leftPercent:function(){return un.call(this)}},mounted:function(){console.log(this.couponPrice)},methods:{boxPressHandler:function(){this.$emit("box-press")},receiveHandler:function(){this.$emit("btn-press")}}},dn=ln,pn=(n("20be"),Object(l["a"])(dn,qe,Ge,!1,null,"c835112a",null)),fn=pn.exports,hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",on:{click:t.boxPressHandler}},[n("div",{staticClass:"flex-row justify-between align-center"},[n("span",{staticClass:"name"},[t._v(t._s(t.couponData.name))]),t.couponData.couponStr?n("span",{staticClass:"describe"},[t._v(t._s(t.couponData.couponStr))]):t._e()]),t.couponData.useLimitStrArray.length>0?n("div",{staticClass:"use-limit"},[t._v(t._s(t.couponData.useLimitStrArray.join(" / ")))]):t._e(),n("div",{staticClass:"info-bottom flex-row justify-between"},[n("div",[t.couponPrice>0?n("price-text",{attrs:{amount:t.couponPrice,size:"large"}}):t._e()],1),n("div",{staticClass:"flex-column"},[n("van-button",{staticClass:"btn-receive",attrs:{round:"",text:t.btnTextComputed,disabled:t.couponDisabled||t.couponReceiveOver||t.btnDisabled,loading:t.btnLoading},on:{click:function(e){return e.stopPropagation(),t.receiveHandler(e)}}})],1)]),t.couponDisabled?t._e():n("van-progress",{staticClass:"progress",attrs:{"stroke-width":"2",inactive:t.couponReceiveOver,"pivot-text":"剩"+t.leftPercent+"%",percentage:t.leftPercent,color:"linear-gradient(to right, #fbe8ee, #eea29d)","pivot-color":"#ff0047"}})],1)},gn=[],vn={props:{couponData:{type:Object,required:!0},couponPrice:{type:Number,default:0},btnText:String,btnDisabled:{type:Boolean,default:!1},btnLoading:{type:Boolean,default:!1},progress:{type:Number,validate:function(t){return t>0&&t<1}}},components:{PromotionalTag:Ke,PriceText:Qe},computed:{priceDisabled:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return priceDisabled.call(this)})),discount:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return discount.call(this)})),couponDisabled:function(){return sn.call(this)},couponReceiveOver:function(){return this.leftPercent<=0},btnTextComputed:function(){return cn.call(this)},leftPercent:function(){return un.call(this)}},methods:{boxPressHandler:function(){this.$emit("box-press")},receiveHandler:function(){this.$emit("btn-press")}}},bn=vn,mn=(n("1921"),Object(l["a"])(bn,hn,gn,!1,null,"7736eb0d",null)),yn=mn.exports,wn={props:{listData:{type:Array,required:!0},btnText:String,showPrepurchaseCoupon:{type:Boolean,default:!1},itemStyle:[String,Object]},components:{dishHoriRack:fn,AmountSales:yn},data:function(){return{loading:!1,page:1,row:10,listDataMap:{},couponInfos:[],couponDishInfos:{}}},watch:{listData:function(t){this.reload()}},mounted:function(){this.getPageCouponInfo()},computed:{requestCoupon:function(){var t=(this.page-1)*this.row,e=this.page*this.row;return this.listData.slice(t,e)}},methods:{getPageCouponInfo:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.requestCoupon.length>0)){e.next=15;break}return t.requestCoupon.forEach((function(e){return t.listDataMap[e.id]=e})),e.next=4,Ie.getCouponInfo(t.requestCoupon.map((function(t){var e=t.id;return e})));case 4:if(r=e.sent,!(r.length>0)){e.next=7;break}return e.abrupt("return",!1);case 7:return(n=t.couponInfos).push.apply(n,Object(ke["a"])(Object.values(r).filter((function(t){return t&&!t.disabled})))),t.page++,i=t.couponInfos.map((function(t){var e=t.couponData;return e.dishes_id})).filter((function(t){return t})),e.next=12,Ie.getDishInfo(i);case 12:return t.couponDishInfos=e.sent,Object.values(t.couponDishInfos).forEach((function(t){return t.tag=t.suitsDishes?"优惠组合":t.tag})),e.abrupt("return",!0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})))()},loadMore:function(){return this.getPageCouponInfo()},reload:function(){this.couponInfos=[],this.page=1,this.getPageCouponInfo()},boxPressHandler:function(t,e){var n=this.listDataMap[t.id];this.$emit("item-press",n,t,e)},btnPressHandler:function(t,e){var n=this.listDataMap[t.id];this.$emit("item-btn-press",n,t,e)}}},xn=wn,_n=(n("b72c"),Object(l["a"])(xn,$e,He,!1,null,"bc0f195a",null)),In=_n.exports,Cn=n("0647"),Sn=n("7663");n("63c1");window.EL=Ie;var Dn=Ie.Page(),On=Dn.Vue;On.config.productionTip=!1,Object.keys(r).forEach((function(t){On.component(t,r[t])})),On.use(Cn["a"]),On.use(Sn["a"]),new On({render:function(t){return t(I)}}).$mount("#__MARKETING_AD__");var Pn=Ce(window.location.pathname),jn=document.createElement("script");jn.setAttribute("type","text/javascript"),jn.setAttribute("src",Oe(Pn)),jn.addEventListener("error",(function(){new On({render:function(t){return t(j)}}).$mount("#__MARKETING_AD__")})),document.head.appendChild(jn)},"573c":function(t,e,n){"use strict";var r=n("cc97"),i=n.n(r);i.a},"5c0b":function(t,e,n){"use strict";var r=n("de4f"),i=n.n(r);i.a},"6be1":function(t,e,n){"use strict";var r=n("39f0"),i=n.n(r);i.a},"82da":function(t,e,n){},"872b":function(t,e,n){},a906:function(t,e,n){},b72c:function(t,e,n){"use strict";var r=n("1815"),i=n.n(r);i.a},b93f:function(t,e,n){"use strict";var r=n("2f6e"),i=n.n(r);i.a},c3fa:function(t,e,n){},cc97:function(t,e,n){},d3cf:function(t,e,n){t.exports={colorMain:"#ff0047",colorMainShallow:"#ff5f58",colorGray1:"#ccc",colorGray2:"#999",colorGray3:"#666",colorGray4:"#333",colorSuccessGreen:"#60CC1C",colorGolden:"#edcb88",colorGoldenBg:"#fff8e9",fontTitle1:"34px",fontTitle2:"25px",fontTitle3:"20px",fontTitle4:"18px",fontText:"16px",fontTextSecondary:"14px",fontAuxiliary:"13px",fontExplain:"11px"}},db27:function(t,e,n){},de4f:function(t,e,n){t.exports={colorMain:"#ff0047",colorMainShallow:"#ff5f58",colorGray1:"#ccc",colorGray2:"#999",colorGray3:"#666",colorGray4:"#333",colorSuccessGreen:"#60CC1C",colorGolden:"#edcb88",colorGoldenBg:"#fff8e9",fontTitle1:"34px",fontTitle2:"25px",fontTitle3:"20px",fontTitle4:"18px",fontText:"16px",fontTextSecondary:"14px",fontAuxiliary:"13px",fontExplain:"11px"}},f1ce:function(t,e,n){"use strict";var r=n("2216"),i=n.n(r);i.a},f2b0:function(t,e,n){"use strict";var r=n("d3cf"),i=n.n(r);i.a}});
//# sourceMappingURL=app.50c49f6d.js.map