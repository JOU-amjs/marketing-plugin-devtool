(function(t){function e(e){for(var r,o,s=e[0],c=e[1],u=e[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"02cf":function(t,e,n){"use strict";(function(t){n("3365"),n("ec82"),n("49f8"),n("7583"),n("d298"),n("3415"),n("08bc"),n("6c4f"),n("3c35"),n("e8fb6"),n("6851"),n("0a3f"),n("b89b"),n("cc26"),n("34ad"),n("a274"),n("4621"),n("a664"),n("667b"),n("c855"),n("941a"),n("4e51"),n("4fd5"),n("ba20"),n("9e33");var r=n("e300"),a=n("9869"),i=n("5f2b"),o=n("9ce4"),s=n("8206"),c=n.n(s),u=n("eddc"),l=function(){return l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},l.apply(this,arguments)};function d(t,e,n,r){function a(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function o(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r["throw"](t))}catch(e){i(e)}}function c(t){t.done?n(t.value):a(t.value).then(o,s)}c((r=r.apply(t,e||[])).next())}))}function f(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,r&&(a=2&i[0]?r["return"]:i[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}var p,h="mpWx",g="mpAlipay",v="browser",m="node";function y(t){var e="";try{e=window.location.href}catch(r){e=""}var n=/devMode=1/.test(e)?"plugin-dev":"prod";return t[n]||""}var b,w=y({"plugin-dev":"http://localhost:18001",prod:"https://api.ycsh6.com"}),x=y({"plugin-dev":"https://api.java.ycsh6.com",prod:"https://api.java.ycsh6.com"}),I={connectSymbol:"-",key:"sd8mow3RPMDS0PMPmMP98AS2RG43T"},_=(p={},p[h]={activity:{id:"i5sdedogJeiICuz0dfX-FC2yBdRdkwwcxCg1okRmnys",dataNames:["name3","name2","thing1","thing4"],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"},payResult:{id:"xxxxx",dataNames:["name1"],errorText:"notifyData中必须包含名称数据"}},p[g]={activity:{id:"",dataNames:[],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"},payResult:{id:"",dataNames:[],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"}},p),C="/pages/webview-container/webview-container";try{b=window}catch(Bt){b=t}var S=b.wx;delete b.wx,delete b.jWeixin;var j={};function O(t,e){e?j[t]=e:delete j[t]}var k={set:function(t,e){var n,a="object"===Object(r["a"])(t)?t:(n={},n[t]=e,n);for(var i in a)O(i,a[i])},get:function(t){var e=Object(r["a"])(t);if("string"===e||"number"===e)return j[t]}};function E(){var t="";try{t=window.navigator.userAgent.toLowerCase()}catch(Bt){t="nodejs"}return-1!==t.indexOf("miniprogram")?h:-1!==t.indexOf("alipay miniprogram")?g:-1!==t.indexOf("node")?m:v}function P(t,e,n){void 0===e&&(e={}),void 0===n&&(n={}),Object.keys(n).forEach((function(e){t=t.replace("{"+e+"}",n[e].toString())}));var r=Object.keys(e).map((function(t){return t+"="+e[t]})).join("&");return r&&(r=(t.indexOf("?")>=0?"&":"?")+r),t+r}function T(t,e,n,r,a,i){void 0===a&&(a=""),void 0===i&&(i={}),r="/"===r.substr(0,1)?r.substr(1):r,r=r?"/"===r.substr(-1)?r:r+"/":r;var o=R(i);return P("/{pluginId}/{activityId}/{shopId}/online/{webPagePath}",{accessToken:k.get("accessToken")||""},{pluginId:t,activityId:e,shopId:n,webPagePath:r})+"#/"+(a+o)}function A(t,e){return void 0===e&&(e={}),d(this,void 0,void 0,(function(){var n;return f(this,(function(r){return n=E(),[2,new Promise((function(r,a){var i=P(t,e);if(n===h)S.miniProgram.navigateTo({url:i,success:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)},fail:function(t){return a(t)}});else if(n===g);else if(n===v){if(!/^https?/.test(t)){var o=$(t);o.query=JSON.parse(decodeURIComponent(o.query||"")||"{}"),t=T(o.pluginId,o.activityId,o.shopId,o.path,o.routePath,o.query)}location.href=t}}))]}))}))}function N(t){return void 0===t&&(t=1),d(this,void 0,void 0,(function(){var e;return f(this,(function(n){return e=E(),[2,new Promise((function(n,r){e===h&&S.miniProgram.navigateBack({delta:t,success:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(t)},fail:function(t){return r(t)}})}))]}))}))}function M(){var t=k.get("devMode");return"1"===(null===t||void 0===t?void 0:t.toString())&&E()===v?"plugin-dev":"prod"}function D(t){void 0===t&&(t={});var e=Object.keys(t).sort().map((function(e){return void 0!==t[e]?e+"="+t[e]:void 0})).filter((function(t){return t})).join(I.connectSymbol)+I.key;return u["Md5"].hashStr(e)}function R(t,e){void 0===t&&(t={}),void 0===e&&(e=!0);var n=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");return e&&(n=(n?"?":"")+n),n}function $(t){var e={};return(t.match(/\?(.*)$/)||["",""])[1].split("&").forEach((function(t){var n=t.split("=");2===n.length&&(e[n[0]]=n[1])})),e}function G(t){void 0===t&&(t="");var e={pluginId:"",activityId:"",shopId:""};t="/"===t.substr(0,1)?t.substr(1):t;var n=t.split("/"),r=n.indexOf("online");if(r<=-1)throw new Error("current url is not a online program's url");return n=n.slice(0,r),e.pluginId=n[0]||"",e.activityId=n[1]||"",e.shopId=n[2]||"",e}function q(t){return void 0===t&&(t=!0),(k.get("activityId")||"")+(k.get("token")||"")+(t?"-echo":"")}function F(t,e,n,r){void 0===r&&(r=!0);var a={};return e&&(a.routePath=e),n&&(a.query=encodeURIComponent(JSON.stringify(n))),P(r?C:"",l({activityId:k.get("activityId")||"",pluginId:k.get("pluginId")||"",shopId:k.get("shopId")||"",path:t},a))}function L(t){var e=function(t){return t>=0&&t<10?"0"+t:t.toString()};return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())}function H(t){t.interceptors.request.use((function(t){var e,n=E(),r=k.get("accessToken")||"",a=Date.parse((new Date).toString())/1e3,i=t.method||"get";return e=/^put|post|patch|delete$/i.test(i)?t.data=t.data||{}:t.params=t.params||{},Object.assign(e,{platform:n,timestamp:a}),e.sign=D(e),t.headers=l(l({},t.headers||{}),{"Content-Type":"application/json;charset=UTF-8"}),r&&(t.headers[i.toLowerCase()||"get"]["x-access-token"]=r),t}),(function(t){Promise.reject(t)})),t.interceptors.response.use((function(t){return 200===t.status?200===t.data.code?t:Promise.reject(new Error(t.data.msg)):Promise.reject(t)}),(function(t){return Promise.reject(t.response)}))}var U=c.a.create({baseURL:w,timeout:3e4});H(U);var K,W=c.a.create({baseURL:x,timeout:3e4});H(W);var J={},B={init:function(t){t&&(K=t,window.addEventListener("message",(function(t){var e=t.data,n=J[e.name];n&&n.apply(null,e.args)})))},on:function(t,e){"function"===typeof e&&"string"===typeof t&&(J[t]=e)},emit:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];K&&K.postMessage({name:t,args:e},"*")}};function z(t){var e=t.path,n=t.routePath,r=t.query;return A(F(e,n,r))}function X(t){return d(this,void 0,void 0,(function(){return f(this,(function(e){return[2,N(t)]}))}))}function Y(t){t&&(document.title=t,"plugin-dev"===M()&&B.emit("titleChanged",t))}function Q(t){var e=location.hash.match(/^(.*?)(\?.*)?$/)||["","",""],n=$(e[2]);n.shareMessage=encodeURIComponent(JSON.stringify(t));var r=P(e[1],n);window.history.replaceState(null,"",r)}var V=Object.freeze({__proto__:null,mpNavigateTo:z,mpNavigateBack:X,setTitle:Y,updateShareMessage:Q}),Z=["beforeEach","beforeResolve","afterEach"];function tt(t,e){if(void 0===t&&(t={}),void 0===e&&(e={title:""}),Object.keys(t).length<=0)return{Vue:a["default"],VueRouter:i["a"],Vuex:o["a"],request:U,javaRequest:W,config:{shopId:k.get("shopId")||"",activityId:k.get("activityId")||"",pluginId:k.get("pluginId")||""}};var n=void 0,s=e.routers,c=e.stores,u=e.plugins,l=e.shareMessage,d=e.title;"object"===Object(r["a"])(s)&&Array.isArray(s.routes)&&s.routes.length>0&&(a["default"].use(i["a"]),n=new i["a"](s),Z.forEach((function(t){s&&n&&"function"===typeof s[t]&&n[t](s[t])})));var f=void 0;"object"===Object(r["a"])(c)&&Object.keys(c).length>0&&(a["default"].use(o["a"]),f=new o["a"].Store(c)),Array.isArray(u)&&u.length>0&&u.forEach((function(t){var e=t[0],n=t[1];a["default"].use(e,n)}));var p={shareMessage:l};if(k.set("mpInitData",p),"plugin-dev"===M()?(B.init(window.parent),B.on("configData",(function(t){k.set("shopConfiguration",t),console.log("%c 接收提示","background:green;color:white","插件视图(线上)已收到配置数据更改通知")}))):W.post("/user/interact/save",{key:k.get("pluginId"),value:p}),"string"===typeof d)Y(d);else if("function"===typeof d){var h=d();"string"===typeof h?Y(h):h instanceof Promise&&h.then((function(t){"string"===typeof t&&Y(t)}))}new a["default"]({router:n,store:f,render:function(e){return e(t)}}).$mount("#app")}function et(t){return d(this,void 0,void 0,(function(){var e,n,r;return f(this,(function(a){switch(a.label){case 0:return e=k.get("activityId"),n=k.get("shopId"),[4,U.post("/v1/call_viewprogramme_function",l({activityId:e,shopId:n},t))];case 1:if(r=a.sent().data,200!==r.code)throw new Error("[ViewProgramServerError]"+r.msg);return[2,r.data]}}))}))}var nt="assert";function rt(t,e){if(!t)throw new Error("["+nt+"]"+(e||"参数断言失败"))}function at(t){var e=this;return new Promise((function(n,r){if(t)var a=setInterval((function(){return d(e,void 0,void 0,(function(){var e,i;return f(this,(function(o){switch(o.label){case 0:return[4,W.get("/user/interact/get",{params:{key:t}})];case 1:return e=o.sent().data,i=e.data,200===e.code&&i?(W.get("/user/interact/notify",{params:{key:t}}),clearInterval(a),i.exception?r(i.exception):n(i.response),[2]):[2]}}))}))}),1500);else r("echoKey不能为空")}))}rt.notNull=function(t,e){rt(null!==t&&void 0!==t,e||"参数不能为空")},rt.match=function(t,e,n){rt(e.test(t),n||"参数与指定正则表达式不匹配")},rt.equal=function(t,e,n){rt(t===e,n||"参数与指定参数不相等")},rt.equalType=function(t,e,n){var r=Array.isArray(e)?e:[e],a=!1;for(var i in r)if(r[i]===(null===t||void 0===t?void 0:t.constructor)){a=!0;break}rt(a,n||"参数与指定类型不匹配")};var it="/pages/interact-webview-miniprogram/interact-webview-miniprogram",ot={COUPON_PURCHASE:"couponPurchase",RECHARGE:"recharge"};function st(t){return d(this,void 0,void 0,(function(){var e,n,r;return f(this,(function(a){return rt(Object.values(ot).indexOf(t.intent)>=0,"intent不正确，请使用`EL.payIntent`中的属性"),rt(t.amount>0,"支付金额必须大于0，单位(元)"),"couponPurchase"===t.intent&&rt(t.couponGroupId,"购买卡券支付时，需传入couponGroupId"),e=q(),n=k.get("activityId"),r=k.get("shopId"),A(it,{data:encodeURIComponent(JSON.stringify({intent:"pay",echoKey:e,payload:{payOptions:t,activityId:n,shopId:r}}))}),[2,at(e)]}))}))}function ct(t,e,n){return d(this,void 0,void 0,(function(){var r,a,i,o,s,c,u,l,d,p,v,m,y,b;return f(this,(function(f){switch(f.label){case 0:if(r=Object.keys(t),rt(r.length>0,"请至少订阅一条消息"),Object.keys(t).forEach((function(e){var n=t[e],r=n.timing,a=n.channel,i=n.notifyData;rt(r instanceof Date||"string"===typeof a,"[MESSAGE_CODE:"+e+"]必须指定timing或channel其中之一"),rt(i.length>0,"[MESSAGE_CODE:"+e+"]模板数据不能为空")})),a=E(),a!==h&&a!==g)throw new Error("'"+a+"'平台上不支持订阅消息");return i={},o=_[a],s=r.map((function(e){var n=o[e];if(n){var r=t[e].notifyData||[];if(!(r.length>=n.dataNames.length))throw new Error("[消息:"+e+"]"+n.errorText);var a={};n.dataNames.forEach((function(t,e){return a[t]=r[e]})),i[n.id]=a}return n.id})).filter((function(t){return t})),rt(s.length>0,"请传入有效的消息名"),c=q(),A(it,{data:encodeURIComponent(JSON.stringify({intent:"notice",echoKey:c,payload:{tmplIds:s,tipText:e,btnText:n}}))}),u={},[4,at(c)];case 1:return u=f.sent(),[3,3];case 2:s.forEach((function(t){return u[t]="accept"})),f.label=3;case 3:for(d in l={},o)p=o[d],l[p.id]=d;for(m in v={},u)y=t[l[m]],"accept"===u[m]&&y&&(v[m]={notifyData:i[m],timing:y.timing?L(y.timing):"",channel:y.channel,path:F(y.path,y.routePath,y.query,!1)});return[4,et({name:"subscribeMessage",data:v})];case 4:return f.sent(),[3,6];case 5:console.log(v),f.label=6;case 6:return b={},Object.keys(u).forEach((function(t){b[l[t]||t]=u[t]})),[2,b]}}))}))}function ut(t){return d(this,void 0,void 0,(function(){return f(this,(function(e){return A(it,{data:window.encodeURIComponent(JSON.stringify({intent:"share",payload:{title:t.title,imageUrl:t.imageUrl,path:F(t.path,t.routePath,t.query)}}))}),[2]}))}))}var lt={shopHomepage:"/page-other/shop-homepage/shop-homepage"};function dt(t,e){return void 0===e&&(e={}),d(this,void 0,void 0,(function(){var n;return f(this,(function(r){return n=lt[t],rt.notNull(n,"invalid pageCode`"+t+"`"),[2,A(n,e)]}))}))}function ft(t){return d(this,void 0,void 0,(function(){var e,n;return f(this,(function(r){switch(r.label){case 0:return[4,et({name:"getUserInfo"})];case 1:return e=r.sent(),e?[3,3]:(n=q(),A("/pages/login/login",{tips:t,echoKey:n,save:"true"}),[4,at(n)]);case 2:e=r.sent(),r.label=3;case 3:return[2,e]}}))}))}function pt(t,e){return d(this,void 0,void 0,(function(){return f(this,(function(n){return rt(t&&e,"both params `userId` and `groupId` must be given"),[2,et({name:"giveCoupon",data:{customerId:t,groupId:e}})]}))}))}function ht(t){return d(this,void 0,void 0,(function(){var e,n,r,a,i,o,s,c,u,l;return f(this,(function(d){switch(d.label){case 0:for(o in rt.equalType(t,[String,Array],"groupIds must be given a string or a array of string"),e="couponInfo",n=k.get(e)||{},r=Array.isArray(t)?t:[t],a={},i=[],r)s=r[o],c=n[s],c?a[c.id]=c:i.push(s);return i.length>0?[4,et({name:"getCouponInfo",data:{groupId:i}})]:[3,2];case 1:u=d.sent(),u.forEach((function(t){a[t.id]=n[t.id]=t})),d.label=2;case 2:return Array.isArray(t)?[2,a]:(l=Object.keys(a),[2,l.length>0?a[l[0]]:null])}}))}))}function gt(){return d(this,void 0,void 0,(function(){var t,e;return f(this,(function(n){switch(n.label){case 0:return t="shopInfo",e=k.get(t),e?[3,2]:[4,et({name:"getShopInfo"})];case 1:e=n.sent(),e.detailedIntroStr=JSON.parse(e.detailedIntroStr||"{}"),k.set(t,e),n.label=2;case 2:return[2,e]}}))}))}function vt(){return d(this,void 0,void 0,(function(){var t,e;return f(this,(function(n){switch(n.label){case 0:return t="shopConfiguration",e=k.get(t),e?[3,2]:[4,et({name:"getConfiguration"})];case 1:e=n.sent(),k.set(t,e),n.label=2;case 2:return[2,e]}}))}))}function mt(t){return d(this,void 0,void 0,(function(){return f(this,(function(e){return[2,et({name:"notifyMessage",data:{channel:t}})]}))}))}function yt(t){t=t.trim();var e=k.get("shopId")||"";t&&e!==t&&(location.href=location.href.replace(/\w+(\/\w+\/)online/,(function(e,n){return e.replace(n,"/"+t+"/")})))}var bt,wt=Object.freeze({__proto__:null,payIntent:ot,pay:st,subscribeMessage:ct,share:ut,navigateELPage:dt,getUserInfo:ft,giveCoupon:pt,getCouponInfo:ht,getShopInfo:gt,getConfiguration:vt,notifyMessage:mt,changeShop:yt}),xt=function(t,e){return t+e.toString()},It="__$$namespaced_storage_keys$$__",_t=function(t){var e=jt[t],n=e.globalThis,r=e.namespace,a=xt(r,It);return{storage:n,keysStoreKey:a,namespace:r,keys:JSON.parse(n.getItem(a)||"[]")}},Ct="localStorage",St="sessionStorage",jt=(bt={},bt[Ct]={globalThis:window.localStorage,namespace:""},bt[St]={globalThis:window.sessionStorage,namespace:""},bt),Ot=function(){function t(t,e){jt[e].namespace=t,this.storageTag=e;var n=_t(e).keys;this.length=n.length}return t.prototype.setItem=function(t,e){var n=_t(this.storageTag),r=n.storage,a=n.keys,i=n.keysStoreKey,o=n.namespace,s=a.indexOf(t);return a.length>0&&s>=0?a[s]=t:a.push(t),this.length=a.length,r.setItem(i,JSON.stringify(a)),r.setItem(xt(o,t),e)},t.prototype.getItem=function(t){var e=_t(this.storageTag),n=e.storage,r=e.namespace;return n.getItem(xt(r,t))},t.prototype.removeItem=function(t){var e=_t(this.storageTag),n=e.storage,r=e.keys,a=e.keysStoreKey,i=e.namespace,o=r.indexOf(t);return r.length>0&&o>=0&&r.splice(o,1),this.length=r.length,n.setItem(a,JSON.stringify(r)),n.removeItem(xt(i,t))},t.prototype.clear=function(){var t=_t(this.storageTag),e=t.storage,n=t.keys,r=t.keysStoreKey,a=t.namespace;n.length>0&&n.forEach((function(t){return e.removeItem(xt(a,t))})),this.length=0,e.removeItem(r)},t.prototype.key=function(t){var e=null,n=_t(this.storageTag),r=n.keys,a=n.namespace,i=r[t];return"string"===typeof i&&(e=i.replace(a,"")),e},t}(),kt={argsLength:function(t,e){return"function "+t+" expected 1 arg bug got "+e}},Et={insert:function(t,e){return rt(1===t.length,kt.argsLength("insert",t.length)),t[0]=Array.isArray(t[0])?t[0]:[t[0]],t},limit:function(t,e){return rt(1===t.length,kt.argsLength("limit",t.length)),t[0]},skip:function(t,e){return rt(1===t.length,kt.argsLength("skip",t.length)),t[0]},sync:function(t,e){return rt(1===Object.keys(e).length&&e.collection,"function sync must call after collection name"),!0}},Pt=function(t){return"forbidden call function `"+t+"`"},Tt={drop:Pt("drop")+", instead you can delete collection by editing property `database` in plugin.js"},At={dropDatabase:Pt("dropDatabase"),createDatabase:Pt("createDatabase"),createCollection:Pt("createCollection")+", collections will create automatically when uploading"};function Nt(t){return Array.isArray(t)&&(t=t.map((function(t){return"string"===typeof t&&(t=JSON.parse(t,(function(t,e){return""===t||(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]+Z$/.test(e)?e=new Date(e):"object"===Object(r["a"])(e)&&1===Object.keys(e).length&&e.$oid&&(e=e.$oid)),e}))),t}))),t}function Mt(t,e,n){var r=new Proxy(t,e);return Object.setPrototypeOf(Promise.prototype,r),new Promise(n)}function Dt(t,e){var n={collection:t},r=Mt(n,{get:function(t,e){var n=Tt[e];return rt("string"!==typeof n,n),function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=Et[e]||function(t,e){return t};return t[e]=i(n,t),r}}},(function(t,r){setTimeout((function(){W({url:"/mongo/collections/operation",method:"post",data:{activityId:e,pluginId:k.get("pluginId"),env:"plugin-dev"===M()?1:2,db:n}}).then((function(e){var n=e.data;200===n.code?t(Nt(n.data)):r(new Error(n.msg))}),(function(t){return r(t)}))}))}));return r}function Rt(t){return new Proxy({},{get:function(e,n){var r=At[n];if("string"===typeof r)throw new Error(r);return Dt(n,t)}})}var $t=$(window.location.search),Gt=G(window.location.pathname);k.set(l(l({},$t),Gt));var qt=M();if(!Gt.activityId||!Gt.shopId)throw new Error("query `activityId` and `shopId` must be given");var Ft=Gt.activityId,Lt=Ft||"",Ht=new Ot(Lt,Ct),Ut=new Ot(Lt,St),Kt=Rt(Lt),Wt=function(t){return function(){return console.warn("please use `EL."+t+"` with the same usage.")}};"prod"===qt&&Object.defineProperties(window,{localStorage:{get:Wt("localStorage")},sessionStorage:{get:Wt("sessionStorage")}});var Jt=l(l({Page:tt,localStorage:Ht,sessionStorage:Ut,database:Kt},wt),V);e["a"]=Jt}).call(this,n("7d15"))},2216:function(t,e,n){},"25b7":function(t,e,n){},"2daa":function(t,e,n){"use strict";var r=n("3b32"),a=n.n(r);a.a},"3b32":function(t,e,n){},"472a":function(t,e,n){t.exports=n.p+"img/access.5981da01.png"},"4e52":function(t,e,n){},"51e5":function(t,e,n){},5639:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"UnionShopCollection",(function(){return B})),n.d(r,"CouponExpression",(function(){return _t}));n("4160"),n("b64b"),n("159b"),n("0c26"),n("666b"),n("527a"),n("4586");var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"production"===t.nodeEnv?n("div",{attrs:{id:"__MARKETING_AD__"}}):n("template-index")},i=[],o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("span",[t._v("你有2个消费券未支付完成")]),n("span",[t._v("去完成")])])}],c={},u=c,l=(n("f1ce"),n("2be6")),d=Object(l["a"])(u,o,s,!1,null,"1cddddd0",null),f=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("union-shop-collection"),n("coupon-expression")],1)},h=[],g={data:function(){return{current:""}}},v=g,m=Object(l["a"])(v,p,h,!1,null,null,null),y=m.exports,b={components:{Unpayed:f,TemplateIndex:y},computed:{nodeEnv:function(){return"production"}}},w=b,x=(n("5c0b"),Object(l["a"])(w,a,i,!1,null,null,null)),I=x.exports,_=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"__ERROR__"}},[n("div",{staticClass:"error-text"},[n("span",[t._v("o(╥﹏╥)o")]),n("span",[t._v("您访问的活动不存在！")])])])}],S={},j=S,O=(n("f2b0"),Object(l["a"])(j,_,C,!1,null,null,null)),k=O.exports,E=n("02cf");n("c975"),n("fb6a"),n("ac1f"),n("1276");function P(t){var e={pluginId:"",activityId:"",shopId:"",page:""};t="/"===t.substr(0,1)?t.substr(1):t;var n=t.split("/"),r=n.indexOf("online");if(r<=-1)throw new Error("current url is not a online program's url");return e.page=n[r+1]||"index",n=n.slice(0,r),e.pluginId=n[0]||"",e.activityId=n[1]||"",e.shopId=n[2]||"",e}n("99af");var T="https://static.ycsh6.com";function A(t){var e=/devMode=1/.test(window.location.href)?"pluginDev":"prod";return t[e]||""}var N=A({pluginDev:function(t){var e=t.page;return"/".concat(e,".js")},prod:function(t){var e=t.pluginId,n=t.page;return"".concat(T,"/program/").concat(e,"/online/").concat(n,".js?").concat(Math.round(1e9*Math.random()))}}),M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container flex-column"},[n("h3",{staticClass:"title"},[t._v("活动联合餐厅")]),n("div",{staticClass:"shop-container",on:{scroll:t.containerScrollHandler}},[n("div",{staticClass:"flex-row",style:t.containerStyle},[n("div",{staticClass:"shop-wrap flex-column"},t._l(t.list,(function(e){return n("div",{key:e.id,ref:"shopItem",refInFor:!0,staticClass:"wrap flex-row align-center",style:t.itemStyle},[n("div",{staticClass:"avatar avatar-wrap",on:{click:function(n){return t.nav2Homepage(e.id)}}},[n("img",{staticClass:"avatar",attrs:{src:e.avatar}})]),n("div",{staticClass:"content-wrap flex-row align-center justify-between",on:{click:function(n){return t.toggleShop(e.id)}}},[n("div",{staticClass:"content flex-column"},[n("span",{staticClass:"title-4 color-gray-4 name"},[t._v(t._s(e.shopName))]),n("span",{staticClass:"text-auxiliary color-gray-2"},[t._v(t._s(e.shortIntro))])]),t._m(0,!0)])])})),0),t.showLoading?n("div",{staticClass:"loading flex-row align-center"},[n("van-loading",{attrs:{type:"spinner",size:20,"text-size":13,vertical:""}},[t._v("加"),n("br"),t._v("载"),n("br"),t._v("中")])],1):t._e()])])])},D=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"btn-access clickable"},[r("img",{attrs:{src:n("472a")}})])}],R=(n("b0c0"),n("a9e3"),n("7c6c")),$=(n("df26"),n("42c2")),G=n("ce37"),q=n("0d46"),F=n.n(q),L=(n("2b8d"),E["a"].Page()),H=L.javaRequest,U=L.config,K={props:{row:{type:Number,default:3,validator:function(t){return t>=1&&t<=3}}},components:Object(G["a"])({},F.a.name,F.a),data:function(){return{itemWidth:.84*document.body.offsetWidth,itemHeight:70,page:1,hasMore:!0,loading:!1,list:[{id:"11",avatar:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3319452976,1715840207&fm=26&gp=0.jpg",shopName:"咔哧咔哧",shortIntro:"独一无二的卡吃烹饪餐厅"},{id:"12",avatar:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3319452976,1715840207&fm=26&gp=0.jpg",shopName:"咔哧咔哧",shortIntro:"独一无二的卡吃烹饪餐厅"},{id:"13",avatar:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3319452976,1715840207&fm=26&gp=0.jpg",shopName:"咔哧咔哧",shortIntro:"独一无二的卡吃烹饪餐厅"},{id:"14",avatar:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3319452976,1715840207&fm=26&gp=0.jpg",shopName:"咔哧咔哧",shortIntro:"独一无二的卡吃烹饪餐厅"},{id:"15",avatar:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3319452976,1715840207&fm=26&gp=0.jpg",shopName:"咔哧咔哧",shortIntro:"独一无二的卡吃烹饪餐厅"}]}},computed:{containerStyle:function(){var t=Math.ceil(this.list.length/this.row),e=Math.min(this.list.length,this.row),n=this.showLoading?30:0;return{width:t*(this.itemWidth+32)+n+"px",height:e*(this.itemHeight+12)+"px"}},itemStyle:function(){return{width:this.itemWidth+"px",height:this.itemHeight+"px"}},showLoading:function(){return this.loading||this.hasMore}},methods:{nav2Homepage:function(t){E["a"].navigateELPage("shopHomepage",{shopId:t})},toggleShop:function(t){E["a"].changeShop(t)},requestList:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.hasMore||t.loading){e.next=12;break}return t.loading=!0,r=3===t.row?9:10,e.next=5,H.get("/shops/activities/".concat(U.activityId,"/shops"),{params:{status:"1,3",pageNum:t.page,pageSize:r}});case 5:a=e.sent,i=a.data,t.loading=!1,t.page++,o=i.data.list,(n=t.list).push.apply(n,Object(R["a"])(o)),o.length<r&&(t.hasMore=!1);case 12:case"end":return e.stop()}}),e)})))()},containerScrollHandler:function(t){var e=t.target;e.scrollWidth-e.scrollLeft-20<=e.offsetWidth&&this.hasMore&&!this.loading&&this.requestList()}},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.requestList();case 2:t.$nextTick((function(){var e=t.$refs.shopItem;e.length>0&&(t.itemWidth=e[0].offsetWidth,t.itemHeight=e[0].offsetHeight)}));case 3:case"end":return e.stop()}}),e)})))()}},W=K,J=(n("a798"),Object(l["a"])(W,M,D,!1,null,"0a4bcd2c",null)),B=J.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.couponDishes,(function(t){return n("dish-hori-rack",{key:t.id})})),1)},X=[],Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"dish-wrap",on:{tap:t.clickHandler}},[t.tag?n("view",{staticClass:"dish-tag"},[n("Badge",{attrs:{text:t.tag,color:t.dishTagColors,inverted:"",shape:"triangle"}})],1):t._e(),t.img?n("image",{staticClass:"dish-img",attrs:{src:t.img,mode:"aspectFill","lazy-load":!0}}):t._e(),n("view",{staticClass:"dish-info"},[n("view",{staticClass:"info-top"},[n("view",{staticClass:"dish-name-wrap"},[t._l(t.spicyLevel,(function(e){return n("text",{key:e,staticClass:"iconfont dish-spicy-level"},[t._v("")])})),n("text",{staticClass:"dish-name"},[t._v(t._s(t.name))])],2),t.describe?n("text",{staticClass:"describe"},[t._v(t._s(t.describe))]):t._e(),t.hasUsableCoupon||t.promoTags&&t.promoTags.length>0?n("view",{staticClass:"promo-tags flex-row align-center"},[t.hasUsableCoupon?n("badge",{staticClass:"tag-item",attrs:{text:"有券可用",shape:"triangle",inverted:""}}):t._e(),t._l(t.promoTags,(function(t){return n("promotional-tag",{key:t,staticClass:"tag-item",attrs:{text:t||""}})}))],2):t._e()]),n("view",{staticClass:"info-bottom"},[n("view",{staticClass:"price-discount"},[n("view",{staticClass:"price"},[t.saledPrice?n("price-text",{attrs:{amount:t.saledPrice}}):t._e(),n("price-text",{attrs:{amount:t.price,disabled:t.priceDisabled}})],1),t.saledPrice?n("view",{staticClass:"discount"},[n("promotional-tag",{attrs:{color:"#FF8558",text:t.discount||""}}),t.limitCopies?n("text",{staticClass:"limit-copies"},[t._v("优惠限"+t._s(t.limitCopies)+"份")]):t._e()],1):t._e()]),n("view",{staticClass:"btn-operate"},[n("view",{class:t.number>0&&t.skuOptions.length<=0?"btn-reduce-dish":"btn-reduce-dish btn-hidden",on:{tap:t.reduceDish}}),n("view",{staticClass:"btn-add-dish",on:{tap:function(e){return t.addDish(!1)},longpress:function(e){return t.addDish(!0)}}},[n("view",{class:t.number>0?"dish-number":"dish-number btn-hidden"},[n("badge",{attrs:{text:t.number,hasPadding:!1}})],1)])])])])])},Q=[],V=(n("b680"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("text",{staticClass:"promotional-tag",style:t.textColor},[t._v(t._s(t.text))])}),Z=[],tt={props:{text:{type:String,required:!0},color:{type:String,default:"#FF0047"}},data:function(){return{textColor:"border-color: ".concat(this.color,"; color: ").concat(this.color)}}},et=tt,nt=(n("68ed"),Object(l["a"])(et,V,Z,!1,null,"76d28a2a",null)),rt=nt.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"price-text"},[t.reduce?n("text",{class:t.reduceCls},[t._v("-")]):t._e(),n("text",{class:t.moneyFlagCls},[t._v("￥")]),n("text",{class:t.amountCls},[t._v(t._s(t.amountDecimal))])])},it=[],ot=(n("a15b"),{props:{amount:{type:Number,required:!0},disabled:{type:Boolean,default:!1},reduce:{type:Boolean,default:!1},size:{validator:function(t){return/^default|large$/.test(t)},default:"default"}},data:function(){return{}},computed:{moneyFlagCls:function(){var t=[];switch(this.size){case"default":t.push("money-flag-default");break;case"large":t.push("money-flag-large");break}return t.concat([this.disabled?"disabled":"enabled"]).join(" ")},amountCls:function(){var t=[];switch(this.size){case"default":t.push("amount-default");break;case"large":t.push("amount-large");break}return t.concat([this.disabled?"disabled":"enabled"]).join(" ")},reduceCls:function(){return[this.disabled?"disabled":"enabled"].join(" ")},amountDecimal:function(){return this.amount.toFixed(2)}}}),st=ot,ct=(n("7d6b"),Object(l["a"])(st,at,it,!1,null,"b7a26aea",null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{class:t.wrapCls,style:t.wrapStyle},[n("text",{staticClass:"badge-text",style:t.textStyle},[t._v(t._s(t.text))])])},dt=[],ft={props:{text:{type:[String,Number],required:!0},inverted:{type:Boolean,default:!1},color:{type:[String,Array],default:"#ff0047"},shape:{type:String,default:"ellipse"},hasPadding:{type:Boolean,default:!0}},computed:{wrapCls:function(){var t=["badge-wrap"];return this.hasPadding&&t.push("badge-padding"),"triangle"===this.shape?t.push("badge-triangle"):t.push("badge-ellipse"),t.concat(this.inverted?[]:["badge-wrap-border"]).join(" ")},wrapStyle:function(){var t=Array.isArray(this.color)?this.color[0]:this.color,e=Array.isArray(this.color)?this.color[1]:"white",n={};return this.inverted?n.background=t:(n.background=e,n.borderColor=t),n},textStyle:function(){var t=Array.isArray(this.color)?this.color[0]:this.color,e=Array.isArray(this.color)?this.color[1]:"white";return{color:this.inverted?e:t}}}},pt=ft,ht=(n("2daa"),Object(l["a"])(pt,lt,dt,!1,null,"f1a47628",null)),gt=ht.exports,vt={components:{PromotionalTag:rt,PriceText:ut,Badge:gt},props:{dishId:{type:[String,Number],required:!0},categoryId:{type:[String,Number],required:!0},img:{type:String,required:!0},number:{validator:function(t){return"number"===typeof t&&t>=0},required:!0},name:{type:String,required:!0},describe:String,price:{type:Number,required:!0},saledPrice:Number,tag:String,promoTags:Array,limitCopies:Number,spicyLevel:Number,skuOptions:{type:Array,default:[]},hasUsableCoupon:Boolean},computed:{priceDisabled:function(){return!!this.saledPrice},discount:function(){return this.saledPrice?(this.saledPrice/this.price*10).toFixed(1)+"折":""},dishTagColors:function(){var t={"招牌":["#FFCC25","#333333"],"优惠组合":["#333333","#FFCC25"]};return t[this.tag]||"#ff0047"}},methods:{clickHandler:function(){this.$emit("click")},addDish:function(t){this.$emit("edit-order-dish",{dishId:this.dishId,categoryId:this.categoryId,ctrl:1,batch:t})},reduceDish:function(){this.number>0&&this.$emit("edit-order-dish",{dishId:this.dishId,categoryId:this.categoryId,ctrl:0})}}},mt=vt,yt=(n("6cbc"),Object(l["a"])(mt,Y,Q,!1,null,"db82677c",null)),bt=yt.exports,wt={components:{dishHoriRack:bt},data:function(){return{couponDishes:[{},{}]}}},xt=wt,It=Object(l["a"])(xt,z,X,!1,null,"50ba31bd",null),_t=It.exports;window.EL=E["a"];var Ct=E["a"].Page(),St=Ct.Vue;St.config.productionTip=!1,Object.keys(r).forEach((function(t){St.component(t,r[t])})),new St({render:function(t){return t(I)}}).$mount("#__MARKETING_AD__");var jt=P(window.location.pathname),Ot=document.createElement("script");Ot.setAttribute("type","text/javascript"),Ot.setAttribute("src",N(jt)),Ot.addEventListener("error",(function(){new St({render:function(t){return t(k)}}).$mount("#__MARKETING_AD__")})),document.head.appendChild(Ot)},"5c0b":function(t,e,n){"use strict";var r=n("de4f"),a=n.n(r);a.a},"68ed":function(t,e,n){"use strict";var r=n("25b7"),a=n.n(r);a.a},"6cbc":function(t,e,n){"use strict";var r=n("51e5"),a=n.n(r);a.a},"7d6b":function(t,e,n){"use strict";var r=n("4e52"),a=n.n(r);a.a},a798:function(t,e,n){"use strict";var r=n("5639"),a=n.n(r);a.a},d3cf:function(t,e,n){t.exports={colorMain:"#ff0047",colorMainShallow:"#ff5f58",colorGray1:"#ccc",colorGray2:"#999",colorGray3:"#666",colorGray4:"#333",colorSuccessGreen:"#60CC1C",colorGolden:"#edcb88",colorGoldenBg:"#fff8e9",fontTitle1:"34px",fontTitle2:"25px",fontTitle3:"20px",fontTitle4:"18px",fontText:"16px",fontTextSecondary:"14px",fontAuxiliary:"13px",fontExplain:"11px"}},de4f:function(t,e,n){t.exports={colorMain:"#ff0047",colorMainShallow:"#ff5f58",colorGray1:"#ccc",colorGray2:"#999",colorGray3:"#666",colorGray4:"#333",colorSuccessGreen:"#60CC1C",colorGolden:"#edcb88",colorGoldenBg:"#fff8e9",fontTitle1:"34px",fontTitle2:"25px",fontTitle3:"20px",fontTitle4:"18px",fontText:"16px",fontTextSecondary:"14px",fontAuxiliary:"13px",fontExplain:"11px"}},f1ce:function(t,e,n){"use strict";var r=n("2216"),a=n.n(r);a.a},f2b0:function(t,e,n){"use strict";var r=n("d3cf"),a=n.n(r);a.a}});
//# sourceMappingURL=app.38d86931.js.map