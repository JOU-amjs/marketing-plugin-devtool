(function(e){function t(t){for(var n,r,s=t[0],c=t[1],l=t[2],p=0,d=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},o={app:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"2bd1":function(e,t,a){"use strict";a.r(t);var n=a("ce37"),o=a("e300"),i={};function r(e,t){t?i[e]=t:delete i[e]}t["default"]={set:function(e,t){var a="object"===Object(o["a"])(e)?e:Object(n["a"])({},e,t);for(var i in a)r(i,a[i])},get:function(e){var t=Object(o["a"])(e);if("string"===t||"number"===t)return i[e]}}},"3e40":function(e,t,a){},"3e59":function(e,t,a){"use strict";var n=a("fa65"),o=a.n(n);o.a},"48ed":function(e,t,a){"use strict";var n=a("b22f"),o=a.n(n);o.a},"547f":function(e,t,a){},"54d8":function(e,t,a){},"55d0":function(e,t,a){"use strict";var n=a("565c"),o=a.n(n);o.a},"565c":function(e,t,a){},"5c0b":function(e,t,a){"use strict";var n=a("de4f"),o=a.n(n);o.a},"5f87":function(e,t,a){},6394:function(e,t,a){"use strict";var n=a("547f"),o=a.n(n);o.a},7271:function(e,t,a){"use strict";function n(){var e="";try{e=window.location.href}catch(t){e=""}return/devMode=1/.test(e)?"plugin-dev":/devMode=2/.test(e)?"debug":"prod"}a.r(t),a.d(t,"default",(function(){return n}))},7857:function(e,t,a){"use strict";var n=a("54d8"),o=a.n(n);o.a},"8bbd":function(e,t,a){"use strict";var n=a("3e40"),o=a.n(n);o.a},"935f":function(e,t,a){"use strict";var n;a("e45a"),Object.defineProperty(t,"__esModule",{value:!0}),t.viewProgramPath=t.tmplCodeMap=t.apiSign=t.javaHost=t.host=t.mockProdEnvironment=t.environmentValue=void 0;var o=a("7ca4"),i=a("9b5a"),r=o.__importDefault(a("7271")),s=o.__importDefault(a("2bd1"));function c(e){var t=r["default"]();return e[t]||""}function l(){s["default"].set({shopId:1,activityId:1,pluginId:"test_plugin",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjQsImlhdCI6MTU5MDY0NzA2MCwiZXhwIjoxNjIxNzUxMDYwfQ.sbgWHNE_f9R-sbfzQ1R7LSQxWfpFbWIt181bU9Q62Sk"})}t.environmentValue=c,t.mockProdEnvironment=l;var u=location.hostname;t.host=c({"plugin-dev":"http://"+u+":18001",prod:"https://api.ycsh6.com",debug:"http://localhost:7001"}),t.javaHost=c({"plugin-dev":"https://api.java.ycsh6.com",prod:"https://api.java.ycsh6.com",debug:"https://api.java.ycsh6.com"}),t.apiSign={connectSymbol:"-",key:"sd8mow3RPMDS0PMPmMP98AS2RG43T"},t.tmplCodeMap=(n={},n[i.MP_WEIXIN]={activity:{id:"i5sdedogJeiICuz0dfX-FC2yBdRdkwwcxCg1okRmnys",dataNames:["name3","name2","thing1","thing4"],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"},payResult:{id:"xxxxx",dataNames:["name1"],errorText:"notifyData中必须包含名称数据"}},n[i.MP_ALIPAY]={activity:{id:"",dataNames:[],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"},payResult:{id:"",dataNames:[],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"}},n),t.viewProgramPath="/pages/webview-container/webview-container"},"93fc":function(e,t,a){},"9b5a":function(e,t,a){"use strict";a.r(t),a.d(t,"MP_WEIXIN",(function(){return n})),a.d(t,"MP_ALIPAY",(function(){return o})),a.d(t,"BROWSER",(function(){return i})),a.d(t,"NODE",(function(){return r})),a.d(t,"MESSAGE_CODE",(function(){return s}));var n="mpWx",o="mpAlipay",i="browser",r="node",s={activity:"activity",payResult:"pay_result"}},a16c:function(e,t,a){"use strict";var n=a("93fc"),o=a.n(n);o.a},b22f:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("0c26"),a("666b"),a("527a"),a("4586");var n=a("9869"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],r=(a("5c0b"),a("2be6")),s={},c=Object(r["a"])(s,o,i,!1,null,null,null),l=c.exports,u=a("5f2b"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"container"}},[a("div",{staticClass:"views"},[a("div",{staticClass:"module"},[a("span",{staticClass:"module__hd"},[e._v("插件配置页")]),a("div",{staticClass:"module__body"},[a("config-frame",{staticClass:"module__entity",attrs:{"config-url":e.containerUrl}})],1)]),a("div",{staticClass:"module"},[a("span",{staticClass:"module__hd"},[e._v("插件视图(线上)")]),a("div",{staticClass:"flex-column module__body"},["title"===e.navStatus?a("div",{staticClass:"flex-row justify-between align-center nav nav-title",style:e.navStyle},[a("span",{staticClass:"text color-gray-2 nav__title"},[e._v(e._s(e.pageTitle))]),a("el-dropdown",{on:{command:e.moreCommandHandler}},[a("span",{staticClass:"el-dropdown-link"},[e._v("···")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"toggle"}},[e._v("切换页面")]),a("el-dropdown-item",{attrs:{command:"share",disabled:!e.sharable}},[e._v(e._s(e.sharable?"分享":"无法分享"))]),a("el-dropdown-item",{attrs:{command:"qrcode"}},[e._v("手机调试")])],1)],1)],1):"location"===e.navStatus?a("div",{staticClass:"nav nav-location",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.togglePage("title")}}},[a("el-input",{staticClass:"nav__location",attrs:{placeholder:"/"},model:{value:e.routePath,callback:function(t){e.routePath=t},expression:"routePath"}},[a("el-select",{staticClass:"page-select",attrs:{slot:"prepend",placeholder:"选择页面"},slot:"prepend",model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}},e._l(e.onlinePages,(function(e){return a("el-option",{key:e.path,attrs:{label:e.path,value:e.path}})})),1)],1)],1):e._e(),e.currentPage?a("plugin-view-online",{staticClass:"module__entity",attrs:{"program-url":e.programUrl()},on:{navigate:e.setPageLocation,share:e.showShareBox,pay:e.showPayBox}}):e._e()],1)])]),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.dialogClosedHandler}},["qrcode"===e.dialogType?a("qrcode",{attrs:{url:"https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+encodeURIComponent(this.programUrl(this.internalIP))}}):"share"===e.dialogType?a("share"):"payment"===e.dialogType?a("payment",{attrs:{data:e.payData},on:{payed:e.payComplete}}):e._e()],1),a("right-menu")],1)},d=[],f=(a("99af"),a("c740"),a("a15b"),a("d81d"),a("0d03"),a("b0c0"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("ce37")),g=(a("df26"),a("42c2")),v=a("0b38"),h=a("f5f2"),b=a("30c6"),m=a("f0ad"),y=a("02a5"),O=a("0f9e"),j=a("fc36"),_=a("333d"),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("iframe",{ref:"configFrame",staticClass:"main-frame",attrs:{src:e.configUrl}}),a("div",{staticClass:"btn-submit",on:{click:e.reviewData}},[a("span",[e._v("提交配置参数")])])])},w=[],x=a("7c6c"),I=(a("3c52"),a("6c4f"),a("2c37"),a("b89b"),a("f9c0"),a("cc26"),a("a274"),a("667b"),a("b151"),a("e300"),"assert");function k(e,t){if(!e)throw new Error("["+I+"]"+(t||"参数断言失败"))}k.notNull=function(e,t){k(null!==e&&void 0!==e,t||"参数不能为空")},k.match=function(e,t,a){k(t.test(e),a||"参数与指定正则表达式不匹配")},k.equal=function(e,t,a){k(e===t,a||"参数与指定参数不相等")},k.equalType=function(e,t,a){var n=Array.isArray(t)?t:[t],o=!1;for(var i in n)if(n[i]===(null===e||void 0===e?void 0:e.constructor)){o=!0;break}k(o,a||"参数与指定类型不匹配")};var P=function(e){return"forbidden call function `"+e+"`"};P("drop"),P("dropDatabase"),P("createDatabase"),P("createCollection");var S=function(){function e(t,a){var n=this;Object(h["a"])(this,e),this.fnCollection={},k.notNull(t),this.receiver=t,window.addEventListener("message",(function(e){var t=e.data,a=n.fnCollection[t.name];a&&a.apply(void 0,Object(x["a"])(t.args))})),e.messages[a]=this}return Object(b["a"])(e,[{key:"on",value:function(e,t){"function"===typeof t&&"string"===typeof e&&(this.fnCollection[e]=t)}},{key:"emit",value:function(e){for(var t,a=arguments.length,n=new Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];null===(t=this.receiver)||void 0===t||t.postMessage({name:e,args:n},"*")}}],[{key:"getWindowMessage",value:function(e){return this.messages[e]?this.messages[e]:null}}]),e}();S.messages={};var D=a("8206"),M=a.n(D),T="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJtZXJjaGFudElkIjoxLCJpYXQiOjE1NzcyMzI3MDgsImV4cCI6MTYwODMzNjcwOH0.NByz-e7h5zrxRwH2ONFsvMIHtW3peFp2zG72YGN6vsg",E="https://api.java.ycsh6.com",N=0,R=0;function $(e){return e.headers=Object(v["a"])(Object(v["a"])({},e.headers||{}),{},{"Content-Type":"application/json;charset=UTF-8","x-access-token":T}),e}var V=M.a.create({timeout:3e4});V.interceptors.request.use($);var U=M.a.create({baseURL:E,timeout:3e4});U.interceptors.request.use($);var q=function(e){Object(m["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),t.apply(this,arguments)}return Object(b["a"])(a,[{key:"reviewData",value:function(){var e;null===(e=this.message)||void 0===e||e.emit("_emitSubmit")}},{key:"postData",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200===t.code||!t.message){e.next=3;break}return this.$message.error(t.message),e.abrupt("return");case 3:return e.next=5,V.post("/mock/save_config_data",{configData:t.data});case 5:a=e.sent,n=a.data,200===n.code&&(this.updateState({configData:t.data}),o=S.getWindowMessage("programFrame"),null===o||void 0===o||o.emit("configData",t.data),this.$message.success("提交成功，请左侧查看数据"));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=this.message=new S(this.$refs.configFrame.contentWindow,"configFrame");e.on("postData",this.postData)}}]),a}(j["c"]);Object(O["a"])([Object(j["b"])(String)],q.prototype,"configUrl",void 0),Object(O["a"])([Object(_["a"])("updateState")],q.prototype,"updateState",void 0),q=Object(O["a"])([j["a"]],q);var F=q,J=F,B=(a("8bbd"),Object(r["a"])(J,C,w,!1,null,"97f2ac96",null)),W=B.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("iframe",{ref:"programFrame",staticClass:"main-frame",attrs:{src:e.programUrl}})])},G=[],L=function(e){Object(m["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),t.apply(this,arguments)}return Object(b["a"])(a,[{key:"mounted",value:function(){var e=this,t=new S(this.$refs.programFrame.contentWindow,"programFrame"),a={titleChanged:function(t){return e.updateState({pageTitle:t})},pageConfig:function(t){return e.updateState({pageConfig:t,shareMessage:t.shareMessage})},navigate:function(t){return e.$emit("navigate",t)},toShare:function(t){return e.$emit("share",t)},pay:function(t){return e.$emit("pay",t)}};for(var n in a)t.on(n,a[n])}}]),a}(j["c"]);Object(O["a"])([Object(j["b"])(String)],L.prototype,"programUrl",void 0),Object(O["a"])([_["a"]],L.prototype,"updateState",void 0),L=Object(O["a"])([j["a"]],L);var A=L,H=A,Q=(a("55d0"),Object(r["a"])(H,z,G,!1,null,"4212c8cc",null)),X=Q.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu"},[a("logo"),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"配置数据",name:"1"}},[a("vue-json-pretty",{attrs:{data:e.configData,"show-length":"",deep:2,highlightMouseoverNode:""}})],1),a("el-collapse-item",{attrs:{title:"数据集合管理",name:"2"}},e._l(e.database,(function(t,n){return a("div",{key:n,staticClass:"database__wrap"},[a("div",{staticClass:"database__header"},[a("label",{staticClass:"env-name"},[e._v(e._s(n))]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.openDialog("create",n)}}},[e._v("添加集合")])],1),a("div",e._l(t.collection,(function(t){return a("el-tag",{key:t,staticClass:"coll-name",attrs:{closable:""},on:{close:function(a){return e.openDialog("remove",n,t)}}},[e._v(e._s(t))])})),1)])})),0)],1),a("el-dialog",{attrs:{title:"create"===e.dialogContentType?"新建数据集合":"删除数据集合",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},["create"===e.dialogContentType?a("div",[a("el-input",{attrs:{placeholder:"请输入集合名称，批量添加以`,`隔开"},model:{value:e.dialogOperateCollection,callback:function(t){e.dialogOperateCollection=t},expression:"dialogOperateCollection"}},[a("template",{slot:"prepend"},[e._v(e._s(e.dialogEnv))])],2)],1):"remove"===e.dialogContentType&&e.dialogOperateCollection?a("div",[a("span",[e._v("你正准备删除数据集合["+e._s(e.dialogOperateCollection)+"]，删除后该集合的数据将会一并删除，确定操作吗？")])]):e._e(),a("template",{slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitCollectionOperation}},[e._v("确定")])],1)],2)],1)},Z=[],K=(a("4de4"),a("a434"),a("1276"),a("498a"),a("8767")),ee=a("ec78"),te=a.n(ee),ae=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ne=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container flex-row align-center"},[n("img",{staticClass:"logo",attrs:{src:a("cf05")}}),n("span",{staticClass:"title-3"},[e._v("有吃生活营销插件开发工具")])])}],oe=function(e){Object(m["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),t.apply(this,arguments)}return a}(j["c"]);oe=Object(O["a"])([j["a"]],oe);var ie,re=oe,se=re,ce=(a("fb03"),Object(r["a"])(se,ae,ne,!1,null,"716ecd36",null)),le=ce.exports,ue=function(e){Object(m["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(h["a"])(this,a),e=t.apply(this,arguments),e.activeNames="1",e.dialogVisible=!1,e.dialogContentType="",e.dialogOperateCollection="",e.dialogEnv="development",e}return Object(b["a"])(a,[{key:"openDialog",value:function(e,t,a){this.dialogVisible=!0,this.dialogContentType=e,this.dialogEnv=t,this.dialogOperateCollection=a||""}},{key:"removeCollection",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var a,n,o,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V["delete"]("/mongo/collections",{data:{env:t,pluginId:this.pluginID,name:[this.dialogOperateCollection]}});case 2:a=e.sent,n=a.data,200===n.code&&(this.$message.success("删除成功"),this.dialogVisible=!1,o=Object(v["a"])({},this.database),i=o[this.dialogEnv].collection.findIndex((function(e){return e===r.dialogOperateCollection})),i>=0&&(o[this.dialogEnv].collection.splice(i,1),this.updateState({database:o})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addCollection",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var a,n,o,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.dialogOperateCollection){e.next=3;break}return this.$message.error("请输入创建的集合名称"),e.abrupt("return");case 3:return a=this.dialogOperateCollection.split(/,|，/).map((function(e){return e.trim()})).filter((function(e){return e})),e.next=6,V.post("/mongo/collections",{env:t,pluginId:this.pluginID,name:a});case 6:n=e.sent,o=n.data,200===o.code&&(this.$message.success("创建成功"),this.dialogVisible=!1,r=Object(v["a"])({},this.database),(i=r[this.dialogEnv].collection).push.apply(i,Object(x["a"])(a)),this.updateState({database:r}));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"submitCollectionOperation",value:function(){var e={development:1,production:2}[this.dialogEnv];"create"===this.dialogContentType?this.addCollection(e):"remove"===this.dialogContentType?this.removeCollection(e):this.$message.error("操作错误")}}]),a}(j["c"]);Object(O["a"])([Object(_["b"])("configData")],ue.prototype,"configData",void 0),Object(O["a"])([Object(_["b"])(String)],ue.prototype,"configUrl",void 0),Object(O["a"])([Object(_["b"])("database")],ue.prototype,"database",void 0),Object(O["a"])([Object(_["b"])("pluginID")],ue.prototype,"pluginID",void 0),Object(O["a"])([Object(_["a"])("updateState")],ue.prototype,"updateState",void 0),ue=Object(O["a"])([Object(j["a"])({components:(ie={},Object(f["a"])(ie,K["Collapse"].name,K["Collapse"]),Object(f["a"])(ie,K["CollapseItem"].name,K["CollapseItem"]),Object(f["a"])(ie,K["Button"].name,K["Button"]),Object(f["a"])(ie,K["Tag"].name,K["Tag"]),Object(f["a"])(ie,K["Dialog"].name,K["Dialog"]),Object(f["a"])(ie,K["Input"].name,K["Input"]),Object(f["a"])(ie,"VueJsonPretty",te.a),Object(f["a"])(ie,"Logo",le),ie)})],ue);var pe=ue,de=pe,fe=(a("a16c"),Object(r["a"])(de,Y,Z,!1,null,"3a7d3dea",null)),ge=fe.exports;a("4160"),a("466d"),a("159b");function ve(e){var t={};return(e.match(/\?(.*)$/)||["",""])[1].split("&").forEach((function(e){var a=e.split("=");2===a.length&&(t[a[0]]=a[1])})),t}var he;a("4c12"),a("7583"),a("d298"),a("3415"),a("08bc"),a("3c35"),a("82e1d"),a("4621"),a("c855"),a("4e51"),a("ba20"),a("9b5a");try{he=window}catch(Ze){he={}}he.wx;delete he.wx,delete he.jWeixin;a("935f"),a("eddc"),a("2bd1");function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(a).forEach((function(t){e=e.replace("{".concat(t,"}"),a[t].toString())}));var n=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&");return n&&(n=(e.indexOf("?")>=0?"&":"?")+n),e+n}var me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"qrcode-container"},[a("el-image",{attrs:{src:e.url},scopedSlots:e._u([{key:"placeholder",fn:function(){return[a("div",{staticClass:"loading"},[e._v("加载中...")])]},proxy:!0}])}),a("span",{staticClass:"tips"},[e._v("手机必须和PC在同一局域网下")])],1)},ye=[],Oe=function(e){Object(m["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),t.apply(this,arguments)}return a}(j["c"]);Object(O["a"])([Object(j["b"])(String)],Oe.prototype,"url",void 0),Oe=Object(O["a"])([Object(j["a"])({components:Object(f["a"])({},K["Image"].name,K["Image"])})],Oe);var je=Oe,_e=je,Ce=(a("3e59"),Object(r["a"])(_e,me,ye,!1,null,"25e5e9f6",null)),we=Ce.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.shareMessage?a("div",{staticClass:"share-container"},[a("span",[e._v("title："+e._s(e.shareMessage.title))]),a("span",[a("span",[e._v("image：")]),e.shareMessage.imageUrl?a("el-image",{staticClass:"share-img",attrs:{src:e.shareMessage.imageUrl,fit:"cover"}}):a("span",[e._v("当前界面截图")])],1),a("span",[e._v("path："+e._s(e.shareMessage.path))]),a("span",[e._v("routePath："+e._s(e.shareMessage.routePath))]),a("span",[e._v("query："+e._s(e.shareMessage.query))])]):a("div",[a("span",[e._v("没有分享内容")])])},Ie=[],ke=function(e){Object(m["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),t.apply(this,arguments)}return a}(j["c"]);Object(O["a"])([Object(_["b"])("shareMessage")],ke.prototype,"shareMessage",void 0),ke=Object(O["a"])([Object(j["a"])({components:Object(f["a"])({},K["Image"].name,K["Image"])})],ke);var Pe,Se=ke,De=Se,Me=(a("7857"),Object(r["a"])(De,xe,Ie,!1,null,"690275e1",null)),Te=Me.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-column-center payment-container"},[a("div",{staticClass:"flex-column-center payment-info"},[a("h1",{staticClass:"tips"},[e._v("￥"+e._s((e.options.amount||0).toFixed(2)))]),a("h4",[e._v("购买 "+e._s(e.couponName))])]),a("el-button",{staticClass:"btn-pay",attrs:{type:"success",loading:e.btnLoading},on:{click:e.pay}},[e._v("确认支付")])],1)},Ne=[],Re=(a("4795"),function(e){Object(m["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(h["a"])(this,a),e=t.apply(this,arguments),e.btnLoading=!1,e}return Object(b["a"])(a,[{key:"pay",value:function(){var e=this;this.btnLoading=!0,setTimeout((function(){e.$emit("payed",!0,e.data.payOptions),e.btnLoading=!1}),1e3)}},{key:"options",get:function(){return this.data.payOptions}},{key:"couponName",get:function(){return this.data.couponInfo?this.data.couponInfo.name:""}}]),a}(j["c"]));Object(O["a"])([Object(j["b"])(Object)],Re.prototype,"data",void 0),Re=Object(O["a"])([Object(j["a"])({components:(Pe={},Object(f["a"])(Pe,K["Image"].name,K["Image"]),Object(f["a"])(Pe,K["Button"].name,K["Button"]),Pe)})],Re);var $e,Ve=Re,Ue=Ve,qe=(a("6394"),Object(r["a"])(Ue,Ee,Ne,!1,null,"2d2ae1aa",null)),Fe=qe.exports,Je=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},Be=function(e){Object(m["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(h["a"])(this,a),e=t.apply(this,arguments),e.currentPage="",e.routePath="",e.routeInfo={path:"",routePath:"",query:{}},e.onlinePages=[],e.navStatus="title",e.containerUrl="http://localhost:18002/?".concat(Je({devMode:1})),e.internalIP="",e.dialogTitle="",e.dialogVisible=!1,e.dialogType="",e.payData={payOptions:{intent:"couponPurchase",amount:0}},e}return Object(b["a"])(a,[{key:"programUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost",t=this.routeInfo,a=t.path,n=void 0===a?"":a,o=t.routePath,i=void 0===o?"":o,r=t.query,s=void 0===r?{}:r;return n=n&&"/"!==n.substr(-1,1)?"".concat(n,"/"):n,i="/"===i.substr(0,1)?i:"/".concat(i),s.devMode=1,s.accessToken=T,"".concat(e,":18003/").concat(this.pluginID,"/").concat(N,"/").concat(R,"/online/").concat(n,"?").concat(Je(s),"#").concat(i)}},{key:"moreCommandHandler",value:function(e){"toggle"===e?this.togglePage("location"):"share"===e?(this.updateState({shareMessage:Object(v["a"])({},this.pageConfig.shareMessage)}),this.showShareBox()):"qrcode"===e&&(this.dialogTitle="手机扫码调试",this.dialogType="qrcode",this.dialogVisible=!0)}},{key:"dialogClosedHandler",value:function(){"payment"===this.dialogType&&this.payComplete(!1)}},{key:"mounted",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o,i,r,s,c,l,u,p,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V.get("/get_devtool_config");case 2:return t=e.sent,a=t.data,200===a.code&&(n=a.data,o=n.IP,i=n.onlinePages,r=n.database,s=n.pluginID,this.internalIP=o?"http://".concat(o):"",this.onlinePages=i,this.onlinePages.length>0&&(this.currentPage=this.routeInfo.path=this.onlinePages[0].path),this.updateState({database:r,pluginID:s})),e.next=7,V.get("mock/get_config_data");case 7:c=e.sent,l=c.data,200===l.code&&this.updateState({configData:l.data}),u=localStorage.getItem("routeInfo"),u&&(p=JSON.parse(u),d=this.onlinePages.findIndex((function(e){var t=e.path;return p.path===t})),d>=0?this.setPageLocation(p):localStorage.removeItem("routeInfo"));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"togglePage",value:function(e){this.navStatus=e,"title"===e&&(this.routeInfo.path=this.currentPage,this.routeInfo.routePath=this.routePath.replace(/\?.*$/,""),this.routeInfo.query=ve(this.routePath),localStorage.setItem("routeInfo",JSON.stringify(this.routeInfo)))}},{key:"showShareBox",value:function(e){e&&this.updateState({shareMessage:e}),this.dialogTitle="分享模拟",this.dialogType="share",this.dialogVisible=!0}},{key:"setPageLocation",value:function(e){var t=e.path,a=e.routePath,n=void 0===a?"":a,o=e.query,i=void 0===o?{}:o;this.routeInfo={path:t,routePath:n,query:i},this.currentPage=t,this.routePath=be(n,i)}},{key:"showPayBox",value:function(e){this.payData=e,this.dialogTitle="支付模拟",this.dialogType="payment",this.dialogVisible=!0}},{key:"payComplete",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,a){var n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.dialogVisible=!1,n=S.getWindowMessage("programFrame"),null===n||void 0===n||n.emit("payComplete",t),!t||!a){e.next=9;break}return e.next=6,V.post("/v1/callback_payment",{activityId:N,pluginId:this.pluginID,type:"payed",intent:a.intent,clientParams:a.clientParams});case 6:o=e.sent,i=o.data,200===i.code?this.$message({message:"服务端支付成功回调返回了[".concat(i.data.moduleReturnValue.toString(),"]"),type:i.data.moduleReturnValue?"success":"warning"}):(console.error(i.message||""),this.$message.error("服务端代码错误，请查看控制台"));case 9:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"navStyle",get:function(){return this.pageConfig.navColor?{background:this.pageConfig.navColor}:{}}},{key:"sharable",get:function(){return!!this.pageConfig.shareMessage}}]),a}(j["c"]);Object(O["a"])([Object(_["b"])("pageTitle")],Be.prototype,"pageTitle",void 0),Object(O["a"])([Object(_["b"])("pluginID")],Be.prototype,"pluginID",void 0),Object(O["a"])([Object(_["b"])("pageConfig")],Be.prototype,"pageConfig",void 0),Object(O["a"])([Object(_["a"])("updateState")],Be.prototype,"updateState",void 0),Be=Object(O["a"])([Object(j["a"])({components:($e={ConfigFrame:W,PluginViewOnline:X,RightMenu:ge},Object(f["a"])($e,K["Select"].name,K["Select"]),Object(f["a"])($e,K["Option"].name,K["Option"]),Object(f["a"])($e,K["Input"].name,K["Input"]),Object(f["a"])($e,K["Button"].name,K["Button"]),Object(f["a"])($e,K["Tag"].name,K["Tag"]),Object(f["a"])($e,K["Dropdown"].name,K["Dropdown"]),Object(f["a"])($e,K["DropdownMenu"].name,K["DropdownMenu"]),Object(f["a"])($e,K["DropdownItem"].name,K["DropdownItem"]),Object(f["a"])($e,K["Dialog"].name,K["Dialog"]),Object(f["a"])($e,"Qrcode",we),Object(f["a"])($e,"Share",Te),Object(f["a"])($e,"Payment",Fe),$e)})],Be);var We=Be,ze=We,Ge=(a("48ed"),Object(r["a"])(ze,p,d,!1,null,"830b9210",null)),Le=Ge.exports;n["default"].use(u["a"]);var Ae=[{path:"/",name:"Home",component:Le}],He=new u["a"]({mode:"history",base:"/",routes:Ae}),Qe=He,Xe=a("9ce4");n["default"].use(Xe["a"]);var Ye=new Xe["a"].Store({state:{pageTitle:"...加载中",configData:{},pageConfig:{},pluginID:"",shareMessage:void 0,database:{development:{collection:[]},production:{collection:[]}}},mutations:{updateState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(a){t[a]&&(e[a]=t[a])}))}},actions:{},modules:{}});a("5d2c");n["default"].prototype.$message=K["Message"],n["default"].config.productionTip=!1,new n["default"]({router:Qe,store:Ye,render:function(e){return e(l)}}).$mount("#app")},cf05:function(e,t,a){e.exports=a.p+"img/logo.63578096.png"},de4f:function(e,t,a){e.exports={colorMain:"#ff0047",colorMainShallow:"#ff5f58",colorGray1:"#ccc",colorGray2:"#999",colorGray3:"#666",colorGray4:"#333",colorSuccessGreen:"#60CC1C",colorGolden:"#edcb88",colorGoldenBg:"#fff8e9",fontTitle1:"34px",fontTitle2:"25px",fontTitle3:"20px",fontTitle4:"18px",fontText:"16px",fontTextSecondary:"14px",fontAuxiliary:"13px",fontExplain:"11px"}},fa65:function(e,t,a){},fb03:function(e,t,a){"use strict";var n=a("5f87"),o=a.n(n);o.a}});
//# sourceMappingURL=app.5dcb329f.js.map