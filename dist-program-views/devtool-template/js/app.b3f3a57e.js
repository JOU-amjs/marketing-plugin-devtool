(function(t){function e(e){for(var n,r,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"2bd1":function(t,e,a){"use strict";a.r(e);var n=a("ce37"),o=a("e300"),i={};function r(t,e){e?i[t]=e:delete i[t]}e["default"]={set:function(t,e){var a="object"===Object(o["a"])(t)?t:Object(n["a"])({},t,e);for(var i in a)r(i,a[i])},get:function(t){var e=Object(o["a"])(t);if("string"===e||"number"===e)return i[t]}}},"3e40":function(t,e,a){},"3e59":function(t,e,a){"use strict";var n=a("fa65"),o=a.n(n);o.a},"547f":function(t,e,a){},"54d8":function(t,e,a){},"55d0":function(t,e,a){"use strict";var n=a("565c"),o=a.n(n);o.a},"565c":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var n=a("de4f"),o=a.n(n);o.a},"5f87":function(t,e,a){},6394:function(t,e,a){"use strict";var n=a("547f"),o=a.n(n);o.a},"69f9":function(t,e,a){"use strict";var n=a("ecba"),o=a.n(n);o.a},7271:function(t,e,a){"use strict";function n(){var t="";try{t=window.location.href}catch(e){t=""}return/devMode=1/.test(t)?"plugin-dev":/devMode=2/.test(t)?"debug":"prod"}a.r(e),a.d(e,"default",(function(){return n}))},7857:function(t,e,a){"use strict";var n=a("54d8"),o=a.n(n);o.a},"8bbd":function(t,e,a){"use strict";var n=a("3e40"),o=a.n(n);o.a},"935f":function(t,e,a){"use strict";var n;a("e45a"),Object.defineProperty(e,"__esModule",{value:!0}),e.viewProgramPath=e.tmplCodeMap=e.apiSign=e.javaHost=e.host=e.mockProdEnvironment=e.environmentValue=void 0;var o=a("7ca4"),i=a("9b5a"),r=o.__importDefault(a("7271")),s=o.__importDefault(a("2bd1"));function c(t){var e=r["default"]();return t[e]||""}function l(){s["default"].set({shopId:1,activityId:1,pluginId:"test_plugin",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjQsImlhdCI6MTU5MDY0NzA2MCwiZXhwIjoxNjIxNzUxMDYwfQ.sbgWHNE_f9R-sbfzQ1R7LSQxWfpFbWIt181bU9Q62Sk"})}e.environmentValue=c,e.mockProdEnvironment=l;var u=location.hostname;e.host=c({"plugin-dev":"http://"+u+":18001",prod:"https://api.ycsh6.com",debug:"http://localhost:7001"}),e.javaHost=c({"plugin-dev":"https://api.java.ycsh6.com",prod:"https://api.java.ycsh6.com",debug:"https://api.java.ycsh6.com"}),e.apiSign={connectSymbol:"-",key:"sd8mow3RPMDS0PMPmMP98AS2RG43T"},e.tmplCodeMap=(n={},n[i.MP_WEIXIN]={activity:{id:"i5sdedogJeiICuz0dfX-FC2yBdRdkwwcxCg1okRmnys",dataNames:["name3","name2","thing1","thing4"],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"},payResult:{id:"xxxxx",dataNames:["name1"],errorText:"notifyData中必须包含名称数据"}},n[i.MP_ALIPAY]={activity:{id:"",dataNames:[],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"},payResult:{id:"",dataNames:[],errorText:"notifyData中必须包含受邀人、邀请人、活动名称、温馨提示4个数据"}},n),e.viewProgramPath="/pages/webview-container/webview-container"},"93fc":function(t,e,a){},"9b5a":function(t,e,a){"use strict";a.r(e),a.d(e,"MP_WEIXIN",(function(){return n})),a.d(e,"MP_ALIPAY",(function(){return o})),a.d(e,"BROWSER",(function(){return i})),a.d(e,"NODE",(function(){return r})),a.d(e,"MESSAGE_CODE",(function(){return s}));var n="mpWx",o="mpAlipay",i="browser",r="node",s={activity:"activity",payResult:"pay_result"}},a16c:function(t,e,a){"use strict";var n=a("93fc"),o=a.n(n);o.a},aea2:function(t,e,a){"use strict";a("d298"),a("3415"),a("08bc"),a("6c4f"),a("3c35"),a("2c37"),a("e45a"),a("b89b"),a("cc26"),a("a274"),a("4621"),a("667b"),a("c855"),a("4e51"),a("ba20"),Object.defineProperty(e,"__esModule",{value:!0}),e.formatTime=e.getMPPath=e.getInteractKey=e.parseKeyParams=e.parseUrlParams=e.buildUrlParams=e.navigateBack=e.navigateTo=e.buildViewProgramUrl=e.buildPath=e.getPlatform=void 0;var n=a("7ca4"),o=a("9b5a"),i=n.__importDefault(a("ed179")),r=a("935f"),s=n.__importDefault(a("2bd1"));function c(){var t="";try{t=window.navigator.userAgent.toLowerCase()}catch(e){t="nodejs"}return-1!==t.indexOf("miniprogram")?o.MP_WEIXIN:-1!==t.indexOf("alipay miniprogram")?o.MP_ALIPAY:-1!==t.indexOf("node")?o.NODE:o.BROWSER}function l(t,e,a){void 0===e&&(e={}),void 0===a&&(a={}),Object.keys(a).forEach((function(e){t=t.replace("{"+e+"}",a[e].toString())}));var n=Object.keys(e).map((function(t){return t+"="+e[t]})).join("&");return n&&(n=(t.indexOf("?")>=0?"&":"?")+n),t+n}function u(t,e,a,n,o,i){void 0===o&&(o=""),void 0===i&&(i={}),n="/"===n.substr(0,1)?n.substr(1):n,n=n?"/"===n.substr(-1)?n:n+"/":n;var r=f(i),c={accessToken:s["default"].get("accessToken")||""},u=s["default"].get("mode");return"plugin-dev"===u?c.devMode=1:"debug"===u&&(c.devMode=2),l("/{pluginId}/{activityId}/{shopId}/online/{webPagePath}",c,{pluginId:t,activityId:e,shopId:a,webPagePath:n})+"#/"+(o+r)}function d(t,e){return void 0===e&&(e={}),n.__awaiter(this,void 0,void 0,(function(){var a;return n.__generator(this,(function(n){return a=c(),[2,new Promise((function(n,r){var s=l(t,e);if(a===o.MP_WEIXIN)i["default"].miniProgram.navigateTo({url:s,success:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(t)},fail:function(t){return r(t)}});else{if(a===o.MP_ALIPAY)throw new Error("暂不支持支付宝小程序");if(a===o.BROWSER){if(!/^https?/.test(t)){var c=g(t);c.query=JSON.parse(decodeURIComponent(c.query||"")||"{}"),t=u(c.pluginId,c.activityId,c.shopId,c.path,c.routePath,c.query)}location.href=t}}}))]}))}))}function p(t){return void 0===t&&(t=1),n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(a){return e=c(),[2,new Promise((function(a,n){e===o.MP_WEIXIN?i["default"].miniProgram.navigateBack({delta:t,success:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a(t)},fail:function(t){return n(t)}}):o.MP_ALIPAY}))]}))}))}function f(t,e){void 0===t&&(t={}),void 0===e&&(e=!0);var a=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");return e&&(a=(a?"?":"")+a),a}function g(t){var e={};return(t.match(/\?(.*)$/)||["",""])[1].split("&").forEach((function(t){var a=t.split("=");2===a.length&&(e[a[0]]=a[1])})),e}function v(t){void 0===t&&(t="");var e={pluginId:"",activityId:"",shopId:""};t="/"===t.substr(0,1)?t.substr(1):t;var a=t.split("/"),n=a.indexOf("online");if(n<=-1)throw new Error("current url is not a online program's url");return a=a.slice(0,n),e.pluginId=a[0]||"",e.activityId=a[1]||"",e.shopId=a[2]||"",e}function h(t){return void 0===t&&(t=!0),(s["default"].get("activityId")||"")+(s["default"].get("token")||"")+(t?"-echo":"")}function m(t,e,a,o){void 0===o&&(o=!0);var i={};return e&&(i.routePath=e),a&&(i.query=encodeURIComponent(JSON.stringify(a))),l(o?r.viewProgramPath:"",n.__assign({activityId:s["default"].get("activityId")||"",pluginId:s["default"].get("pluginId")||"",shopId:s["default"].get("shopId")||"",path:t},i))}function b(t){var e=function(t){return t>=0&&t<10?"0"+t:t.toString()};return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())}e.getPlatform=c,e.buildPath=l,e.buildViewProgramUrl=u,e.navigateTo=d,e.navigateBack=p,e.buildUrlParams=f,e.parseUrlParams=g,e.parseKeyParams=v,e.getInteractKey=h,e.getMPPath=m,e.formatTime=b},cd49:function(t,e,a){"use strict";a.r(e);a("0c26"),a("666b"),a("527a"),a("4586");var n=a("9869"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],r=(a("5c0b"),a("2be6")),s={},c=Object(r["a"])(s,o,i,!1,null,null,null),l=c.exports,u=a("5f2b"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("div",{staticClass:"views"},[a("div",{staticClass:"module"},[a("span",{staticClass:"module__hd"},[t._v("插件配置页")]),a("div",{staticClass:"module__body"},[a("config-frame",{staticClass:"module__entity",attrs:{"config-url":t.containerUrl}})],1)]),a("div",{staticClass:"module"},[a("span",{staticClass:"module__hd"},[t._v("插件视图(线上)")]),a("div",{staticClass:"flex-column module__body"},["title"===t.navStatus?a("div",{staticClass:"flex-row justify-between align-center nav nav-title",style:t.navStyle},[a("span",{staticClass:"text color-gray-2 nav__title"},[t._v(t._s(t.pageTitle))]),a("el-dropdown",{on:{command:t.moreCommandHandler}},[a("span",{staticClass:"el-dropdown-link"},[t._v("···")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"toggle"}},[t._v("切换页面")]),a("el-dropdown-item",{attrs:{command:"share",disabled:!t.sharable}},[t._v(t._s(t.sharable?"分享":"无法分享"))]),a("el-dropdown-item",{attrs:{command:"qrcode"}},[t._v("手机调试")])],1)],1)],1):"location"===t.navStatus?a("div",{staticClass:"nav nav-location",on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.togglePage("title")}}},[a("el-input",{staticClass:"nav__location",attrs:{placeholder:"/"},model:{value:t.routePath,callback:function(e){t.routePath=e},expression:"routePath"}},[a("el-select",{staticClass:"page-select",attrs:{slot:"prepend",placeholder:"选择页面"},slot:"prepend",model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}},t._l(t.onlinePages,(function(t){return a("el-option",{key:t.path,attrs:{label:t.path,value:t.path}})})),1)],1)],1):t._e(),t.currentPage?a("plugin-view-online",{staticClass:"module__entity",attrs:{"program-url":t.programUrl()},on:{navigate:t.setPageLocation,share:t.showShareBox,pay:t.showPayBox}}):t._e()],1)])]),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"400px"},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.dialogClosedHandler}},["qrcode"===t.dialogType?a("qrcode",{attrs:{url:"https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+encodeURIComponent(this.programUrl(this.internalIP))}}):"share"===t.dialogType?a("share"):"payment"===t.dialogType?a("payment",{attrs:{data:t.payData},on:{payed:t.payComplete}}):t._e()],1),a("right-menu")],1)},p=[],f=(a("99af"),a("c740"),a("a15b"),a("d81d"),a("0d03"),a("b0c0"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("ce37")),g=(a("df26"),a("42c2")),v=a("0b38"),h=a("f5f2"),m=a("30c6"),b=a("f0ad"),y=a("02a5"),O=a("0f9e"),j=a("fc36"),_=a("333d"),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("iframe",{ref:"configFrame",staticClass:"main-frame",attrs:{src:t.configUrl}}),a("div",{staticClass:"btn-submit",on:{click:t.reviewData}},[a("span",[t._v("提交配置参数")])])])},C=[],w=a("7c6c"),P=a("c84c"),x=function(){function t(e,a){var n=this;Object(h["a"])(this,t),this.fnCollection={},P["a"].notNull(e),this.receiver=e,window.addEventListener("message",(function(t){var e=t.data,a=n.fnCollection[e.name];a&&a.apply(void 0,Object(w["a"])(e.args))})),t.messages[a]=this}return Object(m["a"])(t,[{key:"on",value:function(t,e){"function"===typeof e&&"string"===typeof t&&(this.fnCollection[t]=e)}},{key:"emit",value:function(t){for(var e,a=arguments.length,n=new Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];null===(e=this.receiver)||void 0===e||e.postMessage({name:t,args:n},"*")}}],[{key:"getWindowMessage",value:function(t){return this.messages[t]?this.messages[t]:null}}]),t}();x.messages={};var k=a("8206"),S=a.n(k),M="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJtZXJjaGFudElkIjoxLCJpYXQiOjE1NzcyMzI3MDgsImV4cCI6MTYwODMzNjcwOH0.NByz-e7h5zrxRwH2ONFsvMIHtW3peFp2zG72YGN6vsg",D="https://api.java.ycsh6.com",T=0,E=0;function R(t){return t.headers=Object(v["a"])(Object(v["a"])({},t.headers||{}),{},{"Content-Type":"application/json;charset=UTF-8","x-access-token":M}),t}var N=S.a.create({timeout:3e4});N.interceptors.request.use(R);var $=S.a.create({baseURL:D,timeout:3e4});$.interceptors.request.use(R);var U=function(t){Object(b["a"])(a,t);var e=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"reviewData",value:function(){var t;null===(t=this.message)||void 0===t||t.emit("_emitSubmit")}},{key:"postData",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(200===e.code||!e.message){t.next=3;break}return this.$message.error(e.message),t.abrupt("return");case 3:return t.next=5,N.post("/mock/save_config_data",{configData:e.data});case 5:a=t.sent,n=a.data,200===n.code&&(this.updateState({configData:e.data}),o=x.getWindowMessage("programFrame"),null===o||void 0===o||o.emit("configData",e.data),this.$message.success("提交成功，请左侧查看数据"));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t=this.message=new x(this.$refs.configFrame.contentWindow,"configFrame");t.on("postData",this.postData)}}]),a}(j["c"]);Object(O["a"])([Object(j["b"])(String)],U.prototype,"configUrl",void 0),Object(O["a"])([Object(_["a"])("updateState")],U.prototype,"updateState",void 0),U=Object(O["a"])([j["a"]],U);var V=U,q=V,B=(a("8bbd"),Object(r["a"])(q,I,C,!1,null,"97f2ac96",null)),W=B.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("iframe",{ref:"programFrame",staticClass:"main-frame",attrs:{src:t.programUrl}})])},L=[],A=function(t){Object(b["a"])(a,t);var e=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return Object(m["a"])(a,[{key:"mounted",value:function(){var t=this,e=new x(this.$refs.programFrame.contentWindow,"programFrame"),a={titleChanged:function(e){return t.updateState({pageTitle:e})},pageConfig:function(e){return t.updateState({pageConfig:e,shareMessage:e.shareMessage})},navigate:function(e){return t.$emit("navigate",e)},toShare:function(e){return t.$emit("share",e)},pay:function(e){return t.$emit("pay",e)}};for(var n in a)e.on(n,a[n])}}]),a}(j["c"]);Object(O["a"])([Object(j["b"])(String)],A.prototype,"programUrl",void 0),Object(O["a"])([_["a"]],A.prototype,"updateState",void 0),A=Object(O["a"])([j["a"]],A);var F=A,z=F,G=(a("55d0"),Object(r["a"])(z,J,L,!1,null,"4212c8cc",null)),H=G.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu"},[a("logo"),a("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"配置数据",name:"1"}},[a("vue-json-pretty",{attrs:{data:t.configData,"show-length":"",deep:2,highlightMouseoverNode:""}})],1),a("el-collapse-item",{attrs:{title:"数据集合管理",name:"2"}},t._l(t.database,(function(e,n){return a("div",{key:n,staticClass:"database__wrap"},[a("div",{staticClass:"database__header"},[a("label",{staticClass:"env-name"},[t._v(t._s(n))]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.openDialog("create",n)}}},[t._v("添加集合")])],1),a("div",t._l(e.collection,(function(e){return a("el-tag",{key:e,staticClass:"coll-name",attrs:{closable:""},on:{close:function(a){return t.openDialog("remove",n,e)}}},[t._v(t._s(e))])})),1)])})),0)],1),a("el-dialog",{attrs:{title:"create"===t.dialogContentType?"新建数据集合":"删除数据集合",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},["create"===t.dialogContentType?a("div",[a("el-input",{attrs:{placeholder:"请输入集合名称，批量添加以`,`隔开"},model:{value:t.dialogOperateCollection,callback:function(e){t.dialogOperateCollection=e},expression:"dialogOperateCollection"}},[a("template",{slot:"prepend"},[t._v(t._s(t.dialogEnv))])],2)],1):"remove"===t.dialogContentType&&t.dialogOperateCollection?a("div",[a("span",[t._v("你正准备删除数据集合["+t._s(t.dialogOperateCollection)+"]，删除后该集合的数据将会一并删除，确定操作吗？")])]):t._e(),a("template",{slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitCollectionOperation}},[t._v("确定")])],1)],2)],1)},Y=[],Q=(a("4de4"),a("a434"),a("1276"),a("498a"),a("8767")),K=a("ec78"),Z=a.n(K),tt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container flex-row align-center"},[n("img",{staticClass:"logo",attrs:{src:a("cf05")}}),n("span",{staticClass:"title-3"},[t._v("有吃生活营销插件开发工具")])])}],at=function(t){Object(b["a"])(a,t);var e=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return a}(j["c"]);at=Object(O["a"])([j["a"]],at);var nt,ot=at,it=ot,rt=(a("fb03"),Object(r["a"])(it,tt,et,!1,null,"716ecd36",null)),st=rt.exports,ct=function(t){Object(b["a"])(a,t);var e=Object(y["a"])(a);function a(){var t;return Object(h["a"])(this,a),t=e.apply(this,arguments),t.activeNames="1",t.dialogVisible=!1,t.dialogContentType="",t.dialogOperateCollection="",t.dialogEnv="development",t}return Object(m["a"])(a,[{key:"openDialog",value:function(t,e,a){this.dialogVisible=!0,this.dialogContentType=t,this.dialogEnv=e,this.dialogOperateCollection=a||""}},{key:"removeCollection",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var a,n,o,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,N["delete"]("/mongo/collections",{data:{env:e,pluginId:this.pluginID,name:[this.dialogOperateCollection]}});case 2:a=t.sent,n=a.data,200===n.code&&(this.$message.success("删除成功"),this.dialogVisible=!1,o=Object(v["a"])({},this.database),i=o[this.dialogEnv].collection.findIndex((function(t){return t===r.dialogOperateCollection})),i>=0&&(o[this.dialogEnv].collection.splice(i,1),this.updateState({database:o})));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"addCollection",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var a,n,o,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.dialogOperateCollection){t.next=3;break}return this.$message.error("请输入创建的集合名称"),t.abrupt("return");case 3:return a=this.dialogOperateCollection.split(/,|，/).map((function(t){return t.trim()})).filter((function(t){return t})),t.next=6,N.post("/mongo/collections",{env:e,pluginId:this.pluginID,name:a});case 6:n=t.sent,o=n.data,200===o.code&&(this.$message.success("创建成功"),this.dialogVisible=!1,r=Object(v["a"])({},this.database),(i=r[this.dialogEnv].collection).push.apply(i,Object(w["a"])(a)),this.updateState({database:r}));case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"submitCollectionOperation",value:function(){var t={development:1,production:2}[this.dialogEnv];"create"===this.dialogContentType?this.addCollection(t):"remove"===this.dialogContentType?this.removeCollection(t):this.$message.error("操作错误")}}]),a}(j["c"]);Object(O["a"])([Object(_["b"])("configData")],ct.prototype,"configData",void 0),Object(O["a"])([Object(_["b"])(String)],ct.prototype,"configUrl",void 0),Object(O["a"])([Object(_["b"])("database")],ct.prototype,"database",void 0),Object(O["a"])([Object(_["b"])("pluginID")],ct.prototype,"pluginID",void 0),Object(O["a"])([Object(_["a"])("updateState")],ct.prototype,"updateState",void 0),ct=Object(O["a"])([Object(j["a"])({components:(nt={},Object(f["a"])(nt,Q["Collapse"].name,Q["Collapse"]),Object(f["a"])(nt,Q["CollapseItem"].name,Q["CollapseItem"]),Object(f["a"])(nt,Q["Button"].name,Q["Button"]),Object(f["a"])(nt,Q["Tag"].name,Q["Tag"]),Object(f["a"])(nt,Q["Dialog"].name,Q["Dialog"]),Object(f["a"])(nt,Q["Input"].name,Q["Input"]),Object(f["a"])(nt,"VueJsonPretty",Z.a),Object(f["a"])(nt,"Logo",st),nt)})],ct);var lt=ct,ut=lt,dt=(a("a16c"),Object(r["a"])(ut,X,Y,!1,null,"3a7d3dea",null)),pt=dt.exports;a("4160"),a("466d"),a("159b");function ft(t){var e={};return(t.match(/\?(.*)$/)||["",""])[1].split("&").forEach((function(t){var a=t.split("=");2===a.length&&(e[a[0]]=a[1])})),e}var gt=a("aea2"),vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"qrcode-container"},[a("el-image",{attrs:{src:t.url},scopedSlots:t._u([{key:"placeholder",fn:function(){return[a("div",{staticClass:"loading"},[t._v("加载中...")])]},proxy:!0}])}),a("span",{staticClass:"tips"},[t._v("手机必须和PC在同一局域网下")])],1)},ht=[],mt=function(t){Object(b["a"])(a,t);var e=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return a}(j["c"]);Object(O["a"])([Object(j["b"])(String)],mt.prototype,"url",void 0),mt=Object(O["a"])([Object(j["a"])({components:Object(f["a"])({},Q["Image"].name,Q["Image"])})],mt);var bt=mt,yt=bt,Ot=(a("3e59"),Object(r["a"])(yt,vt,ht,!1,null,"25e5e9f6",null)),jt=Ot.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.shareMessage?a("div",{staticClass:"share-container"},[a("span",[t._v("title："+t._s(t.shareMessage.title))]),a("span",[a("span",[t._v("image：")]),t.shareMessage.imageUrl?a("el-image",{staticClass:"share-img",attrs:{src:t.shareMessage.imageUrl,fit:"cover"}}):a("span",[t._v("当前界面截图")])],1),a("span",[t._v("path："+t._s(t.shareMessage.path))]),a("span",[t._v("routePath："+t._s(t.shareMessage.routePath))]),a("span",[t._v("query："+t._s(t.shareMessage.query))])]):a("div",[a("span",[t._v("没有分享内容")])])},It=[],Ct=function(t){Object(b["a"])(a,t);var e=Object(y["a"])(a);function a(){return Object(h["a"])(this,a),e.apply(this,arguments)}return a}(j["c"]);Object(O["a"])([Object(_["b"])("shareMessage")],Ct.prototype,"shareMessage",void 0),Ct=Object(O["a"])([Object(j["a"])({components:Object(f["a"])({},Q["Image"].name,Q["Image"])})],Ct);var wt,Pt=Ct,xt=Pt,kt=(a("7857"),Object(r["a"])(xt,_t,It,!1,null,"690275e1",null)),St=kt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-column-center payment-container"},[a("div",{staticClass:"flex-column-center payment-info"},[a("h1",{staticClass:"tips"},[t._v("￥"+t._s((t.options.amount||0).toFixed(2)))]),a("h4",[t._v("购买 "+t._s(t.couponName))])]),a("el-button",{staticClass:"btn-pay",attrs:{type:"success",loading:t.btnLoading},on:{click:t.pay}},[t._v("确认支付")])],1)},Dt=[],Tt=(a("4795"),function(t){Object(b["a"])(a,t);var e=Object(y["a"])(a);function a(){var t;return Object(h["a"])(this,a),t=e.apply(this,arguments),t.btnLoading=!1,t}return Object(m["a"])(a,[{key:"pay",value:function(){var t=this;this.btnLoading=!0,setTimeout((function(){t.$emit("payed",!0,t.data.payOptions),t.btnLoading=!1}),1e3)}},{key:"options",get:function(){return this.data.payOptions}},{key:"couponName",get:function(){return this.data.couponInfo?this.data.couponInfo.name:""}}]),a}(j["c"]));Object(O["a"])([Object(j["b"])(Object)],Tt.prototype,"data",void 0),Tt=Object(O["a"])([Object(j["a"])({components:(wt={},Object(f["a"])(wt,Q["Image"].name,Q["Image"]),Object(f["a"])(wt,Q["Button"].name,Q["Button"]),wt)})],Tt);var Et,Rt=Tt,Nt=Rt,$t=(a("6394"),Object(r["a"])(Nt,Mt,Dt,!1,null,"2d2ae1aa",null)),Ut=$t.exports,Vt=function(t){return Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&")},qt=function(t){Object(b["a"])(a,t);var e=Object(y["a"])(a);function a(){var t;return Object(h["a"])(this,a),t=e.apply(this,arguments),t.currentPage="",t.routePath="",t.routeInfo={path:"",routePath:"",query:{}},t.onlinePages=[],t.navStatus="title",t.containerUrl="http://localhost:18002/?".concat(Vt({devMode:1})),t.internalIP="",t.dialogTitle="",t.dialogVisible=!1,t.dialogType="",t.payData={payOptions:{intent:"couponPurchase",amount:0}},t}return Object(m["a"])(a,[{key:"programUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost",e=this.routeInfo,a=e.path,n=void 0===a?"":a,o=e.routePath,i=void 0===o?"":o,r=e.query,s=void 0===r?{}:r;n=n&&"/"!==n.substr(-1,1)?"".concat(n,"/"):n,i="/"===i.substr(0,1)?i:"/".concat(i);var c={devMode:1,accessToken:M};return"".concat(t,":18003/").concat(this.pluginID,"/").concat(T,"/").concat(E,"/online/").concat(n,"?").concat(Vt(c),"#").concat(i,"?").concat(Vt(s))}},{key:"moreCommandHandler",value:function(t){"toggle"===t?this.togglePage("location"):"share"===t?(this.updateState({shareMessage:Object(v["a"])({},this.pageConfig.shareMessage)}),this.showShareBox()):"qrcode"===t&&(this.dialogTitle="手机扫码调试",this.dialogType="qrcode",this.dialogVisible=!0)}},{key:"dialogClosedHandler",value:function(){"payment"===this.dialogType&&this.payComplete(!1)}},{key:"mounted",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,a,n,o,i,r,s,c,l,u,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,N.get("/get_devtool_config");case 2:return e=t.sent,a=e.data,200===a.code&&(n=a.data,o=n.IP,i=n.onlinePages,r=n.database,s=n.pluginID,this.internalIP=o?"http://".concat(o):"",this.onlinePages=i,this.onlinePages.length>0&&(this.currentPage=this.routeInfo.path=this.onlinePages[0].path),this.updateState({database:r,pluginID:s})),t.next=7,N.get("mock/get_config_data");case 7:c=t.sent,l=c.data,200===l.code&&this.updateState({configData:l.data}),u=localStorage.getItem("routeInfo"),u&&(d=JSON.parse(u),p=this.onlinePages.findIndex((function(t){var e=t.path;return d.path===e})),p>=0?this.setPageLocation(d):localStorage.removeItem("routeInfo"));case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"togglePage",value:function(t){this.navStatus=t,"title"===t&&(this.routeInfo.path=this.currentPage,this.routeInfo.routePath=this.routePath.replace(/\?.*$/,""),this.routeInfo.query=ft(this.routePath),localStorage.setItem("routeInfo",JSON.stringify(this.routeInfo)))}},{key:"showShareBox",value:function(t){t&&this.updateState({shareMessage:t}),this.dialogTitle="分享模拟",this.dialogType="share",this.dialogVisible=!0}},{key:"setPageLocation",value:function(t){var e=t.path,a=t.routePath,n=void 0===a?"":a,o=t.query,i=void 0===o?{}:o;this.routeInfo={path:e,routePath:n,query:i},this.currentPage=e,this.routePath=Object(gt["buildPath"])(n,i)}},{key:"showPayBox",value:function(t){this.payData=t,this.dialogTitle="支付模拟",this.dialogType="payment",this.dialogVisible=!0}},{key:"payComplete",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e,a){var n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.dialogVisible=!1,n=x.getWindowMessage("programFrame"),null===n||void 0===n||n.emit("payComplete",e),!e||!a){t.next=9;break}return t.next=6,N.post("/v1/callback_payment",{activityId:T,pluginId:this.pluginID,type:"payed",intent:a.intent,clientParams:a.clientParams});case 6:o=t.sent,i=o.data,200===i.code?this.$message({message:"服务端支付成功回调返回了[".concat(i.data.moduleReturnValue.toString(),"]"),type:i.data.moduleReturnValue?"success":"warning"}):(console.error(i.message||""),this.$message.error("服务端代码错误，请查看控制台"));case 9:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"navStyle",get:function(){return this.pageConfig.navColor?{background:this.pageConfig.navColor}:{}}},{key:"sharable",get:function(){return!!this.pageConfig.shareMessage}}]),a}(j["c"]);Object(O["a"])([Object(_["b"])("pageTitle")],qt.prototype,"pageTitle",void 0),Object(O["a"])([Object(_["b"])("pluginID")],qt.prototype,"pluginID",void 0),Object(O["a"])([Object(_["b"])("pageConfig")],qt.prototype,"pageConfig",void 0),Object(O["a"])([Object(_["a"])("updateState")],qt.prototype,"updateState",void 0),qt=Object(O["a"])([Object(j["a"])({components:(Et={ConfigFrame:W,PluginViewOnline:H,RightMenu:pt},Object(f["a"])(Et,Q["Select"].name,Q["Select"]),Object(f["a"])(Et,Q["Option"].name,Q["Option"]),Object(f["a"])(Et,Q["Input"].name,Q["Input"]),Object(f["a"])(Et,Q["Button"].name,Q["Button"]),Object(f["a"])(Et,Q["Tag"].name,Q["Tag"]),Object(f["a"])(Et,Q["Dropdown"].name,Q["Dropdown"]),Object(f["a"])(Et,Q["DropdownMenu"].name,Q["DropdownMenu"]),Object(f["a"])(Et,Q["DropdownItem"].name,Q["DropdownItem"]),Object(f["a"])(Et,Q["Dialog"].name,Q["Dialog"]),Object(f["a"])(Et,"Qrcode",jt),Object(f["a"])(Et,"Share",St),Object(f["a"])(Et,"Payment",Ut),Et)})],qt);var Bt=qt,Wt=Bt,Jt=(a("69f9"),Object(r["a"])(Wt,d,p,!1,null,"2c0c45f2",null)),Lt=Jt.exports;n["default"].use(u["a"]);var At=[{path:"/",name:"Home",component:Lt}],Ft=new u["a"]({mode:"history",base:"/",routes:At}),zt=Ft,Gt=a("9ce4");n["default"].use(Gt["a"]);var Ht=new Gt["a"].Store({state:{pageTitle:"...加载中",configData:{},pageConfig:{},pluginID:"",shareMessage:void 0,database:{development:{collection:[]},production:{collection:[]}}},mutations:{updateState:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(a){e[a]&&(t[a]=e[a])}))}},actions:{},modules:{}});a("5d2c");n["default"].prototype.$message=Q["Message"],n["default"].config.productionTip=!1,new n["default"]({router:zt,store:Ht,render:function(t){return t(l)}}).$mount("#app")},cf05:function(t,e,a){t.exports=a.p+"img/logo.63578096.png"},de4f:function(t,e,a){t.exports={colorMain:"#ff0047",colorMainShallow:"#ff5f58",colorGray1:"#ccc",colorGray2:"#999",colorGray3:"#666",colorGray4:"#333",colorSuccessGreen:"#60CC1C",colorGolden:"#edcb88",colorGoldenBg:"#fff8e9",fontTitle1:"34px",fontTitle2:"25px",fontTitle3:"20px",fontTitle4:"18px",fontText:"16px",fontTextSecondary:"14px",fontAuxiliary:"13px",fontExplain:"11px"}},ecba:function(t,e,a){},ed179:function(t,e,a){"use strict";var n;a.r(e);try{n=window}catch(i){n={}}var o=n.wx;delete n.wx,delete n.jWeixin,e["default"]=o},fa65:function(t,e,a){},fb03:function(t,e,a){"use strict";var n=a("5f87"),o=a.n(n);o.a}});
//# sourceMappingURL=app.b3f3a57e.js.map