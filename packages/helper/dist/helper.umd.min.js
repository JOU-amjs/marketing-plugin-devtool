/*!
  * helper 0.1.0 (https://github.com/JOU amjs/view-program-lib)
  * API https://github.com/JOU amjs/view-program-lib/blob/master/doc/api.md
  * Copyright 2017-2020 JOU amjs. All Rights Reserved
  * Licensed under MIT (https://github.com/JOU amjs/view-program-lib/blob/master/LICENSE)
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).EL={})}(this,(function(t){"use strict";function e(t,e){if(!t)throw new Error("[assert]"+(e||"参数断言失败"))}e.notNull=function(t,n){e(null!=t,n||"参数不能为空")},e.match=function(t,n,r){e(n.test(t),r||"参数与指定正则表达式不匹配")},e.equal=function(t,n,r){e(t===n,r||"参数与指定参数不相等")},e.equalType=function(t,n,r){var o=Array.isArray(n)?n:[n],i=!1;for(var a in o)if(o[a]===(null==t?void 0:t.constructor)){i=!0;break}e(i,r||"参数与指定类型不匹配")};var n=function(t,e){return"function "+t+" expected 1 arg bug got "+e},r={insert:function(t,r){return e(1===t.length,n("insert",t.length)),t[0]=Array.isArray(t[0])?t[0]:[t[0]],t},limit:function(t,r){return e(1===t.length,n("limit",t.length)),t[0]},skip:function(t,r){return e(1===t.length,n("skip",t.length)),t[0]},sync:function(t,n){return e(1===Object.keys(n).length&&n.collection,"function sync must call after collection name"),!0}},o=function(t){return"forbidden call function `"+t+"`"},i={drop:o("drop")+", instead you can delete collection by editing property `database` in plugin.js"},a={dropDatabase:o("dropDatabase"),createDatabase:o("createDatabase"),createCollection:o("createCollection")+", collections will create automatically when uploading"};function c(t,n){var o={collection:t},a=function(t,e,n){var r=new Proxy(t,e);return Object.setPrototypeOf(Promise.prototype,r),new Promise(n)}(o,{get:function(t,n){var o=i[n];return e("string"!=typeof o,o),function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var i=r[n]||function(t,e){return t};return t[n]=i(e,t),a}}},(function(t,e){setTimeout((function(){n(o).then((function(n){if(n!==o){var r,i=n.data;if(200===i.code)t((r=i.data,Array.isArray(r)?r.map((function(t){return"string"==typeof t&&(t=JSON.parse(t,(function(t,e){return""===t||(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]+Z$/.test(e)?e=new Date(e):"object"==typeof e&&1===Object.keys(e).length&&e.$oid&&(e=e.$oid)),e}))),delete t.activityId,t})):r));else e(new Error(i.msg))}else t(n)}),(function(t){return e(t)}))}))}));return a}t.assert=e,t.createNamespacedDatabase=function(t){return new Proxy({},{get:function(e,n){var r=a[n];if("string"==typeof r)throw new Error(r);return c(n,t)}})},Object.defineProperty(t,"__esModule",{value:!0})}));
